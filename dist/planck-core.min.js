!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(r.Planck=r.Planck||{})}(this,function(r){"use strict";function t(r){var t=Symbol(r);return function(r,n){return null==r[t]&&(r[t]="function"==typeof n?n({}):{}),r[t]}}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e=function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function r(r,t){for(var n=0;n<t.length;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}return function(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),t}}(),a=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(r[e]=n[e])}return r},i=function(){return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,t){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=r[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);e=!0);}catch(r){o=!0,a=r}finally{try{!e&&u.return&&u.return()}finally{if(o)throw a}}return n}(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=t("AggregateFunction"),f=function(){function r(t){if(e(this,r),t!==u)throw new Error("Use the static new function instead of new operator");for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];u(this).targets=o}return o(r,[{key:"apply",value:function(r,t,n){for(var e=u(this).targets,o=[],a=0;a<e.length;++a)o.push(e[a].apply(t,n));return o}}],[{key:"new",value:function(){for(var r=arguments.length,t=Array(r),n=0;n<r;n++)t[n]=arguments[n];return new Proxy(function(){},new(Function.prototype.bind.apply(this,[null].concat([u],t))))}}]),r}(),s=t("Aggregate"),c=function(){function r(t){if(e(this,r),t!==s)throw new Error("Use the static new function instead of new operator");for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];s(this).targets=o}return o(r,[{key:"set",value:function(r,t,n,e){for(var o=s(this).targets,a=0;a<o.length;++a)o[a][t]=n;return r[t]=n,!0}},{key:"get",value:function(r,t,n){var e=s(this).targets;if("function"!=typeof r[t]){var o=i(e,1)[0];return o&&o[t]}for(var a=[],u=0;u<e.length;++u){var c=e[u];a.push(c[t].bind(c))}return f.new.apply(f,a)}}],[{key:"new",value:function(){for(var r=arguments.length,t=Array(r),n=0;n<r;n++)t[n]=arguments[n];return new Proxy({},new(Function.prototype.bind.apply(this,[null].concat([s],t))))}}]),r}();var l={min:function(r,t){var n=void 0,e=Number.POSITIVE_INFINITY;if("function"!=typeof t){for(var o=0;o<r.length;++o){var a=r[o];a<e&&(n=a,e=a)}return n}for(var i=0;i<r.length;++i){var u=r[i],f=t(u,i);f<e&&(n=u,e=f)}return n},max:function(r,t){var n=void 0,e=Number.NEGATIVE_INFINITY;if("function"!=typeof t){for(var o=0;o<r.length;++o){var a=r[o];a>e&&(n=a,e=a)}return n}for(var i=0;i<r.length;++i){var u=r[i],f=t(u,i);f>e&&(n=u,e=f)}return n}};function h(r){this.message=r}function p(r){if("string"!=typeof r)throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function y(r,t){for(var n,e="",o=0,a=-1,i=0,u=0;u<=r.length;++u){if(u<r.length)n=r.charCodeAt(u);else{if(47===n)break;n=47}if(47===n){if(a===u-1||1===i);else if(a!==u-1&&2===i){if(e.length<2||2!==o||46!==e.charCodeAt(e.length-1)||46!==e.charCodeAt(e.length-2))if(e.length>2){var f=e.lastIndexOf("/");if(f!==e.length-1){-1===f?(e="",o=0):o=(e=e.slice(0,f)).length-1-e.lastIndexOf("/"),a=u,i=0;continue}}else if(2===e.length||1===e.length){e="",o=0,a=u,i=0;continue}t&&(e.length>0?e+="/..":e="..",o=2)}else e.length>0?e+="/"+r.slice(a+1,u):e=r.slice(a+1,u),o=u-a-1;a=u,i=0}else 46===n&&-1!==i?++i:i=-1}return e}Object.setPrototypeOf(h,Error),h.prototype=Object.create(Error.prototype),h.prototype.name="AssertionError",h.prototype.message="",h.prototype.constructor=h;var v={resolve:function(){for(var r,t="",n=!1,e=arguments.length-1;e>=-1&&!n;e--){var o;e>=0?o=arguments[e]:(void 0===r&&(r=process.cwd()),o=r),p(o),0!==o.length&&(t=o+"/"+t,n=47===o.charCodeAt(0))}return t=y(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(r){if(p(r),0===r.length)return".";var t=47===r.charCodeAt(0),n=47===r.charCodeAt(r.length-1);return 0!==(r=y(r,!t)).length||t||(r="."),r.length>0&&n&&(r+="/"),t?"/"+r:r},isAbsolute:function(r){return p(r),r.length>0&&47===r.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var r,t=0;t<arguments.length;++t){var n=arguments[t];p(n),n.length>0&&(void 0===r?r=n:r+="/"+n)}return void 0===r?".":v.normalize(r)},relative:function(r,t){if(p(r),p(t),r===t)return"";if((r=v.resolve(r))===(t=v.resolve(t)))return"";for(var n=1;n<r.length&&47===r.charCodeAt(n);++n);for(var e=r.length,o=e-n,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var i=t.length-a,u=o<i?o:i,f=-1,s=0;s<=u;++s){if(s===u){if(i>u){if(47===t.charCodeAt(a+s))return t.slice(a+s+1);if(0===s)return t.slice(a+s)}else o>u&&(47===r.charCodeAt(n+s)?f=s:0===s&&(f=0));break}var c=r.charCodeAt(n+s);if(c!==t.charCodeAt(a+s))break;47===c&&(f=s)}var l="";for(s=n+f+1;s<=e;++s)s!==e&&47!==r.charCodeAt(s)||(0===l.length?l+="..":l+="/..");return l.length>0?l+t.slice(a+f):(a+=f,47===t.charCodeAt(a)&&++a,t.slice(a))},_makeLong:function(r){return r},dirname:function(r){if(p(r),0===r.length)return".";for(var t=r.charCodeAt(0),n=47===t,e=-1,o=!0,a=r.length-1;a>=1;--a)if(47===(t=r.charCodeAt(a))){if(!o){e=a;break}}else o=!1;return-1===e?n?"/":".":n&&1===e?"//":r.slice(0,e)},basename:function(r,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');p(r);var n,e=0,o=-1,a=!0;if(void 0!==t&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";var i=t.length-1,u=-1;for(n=r.length-1;n>=0;--n){var f=r.charCodeAt(n);if(47===f){if(!a){e=n+1;break}}else-1===u&&(a=!1,u=n+1),i>=0&&(f===t.charCodeAt(i)?-1==--i&&(o=n):(i=-1,o=u))}return e===o?o=u:-1===o&&(o=r.length),r.slice(e,o)}for(n=r.length-1;n>=0;--n)if(47===r.charCodeAt(n)){if(!a){e=n+1;break}}else-1===o&&(a=!1,o=n+1);return-1===o?"":r.slice(e,o)},extname:function(r){p(r);for(var t=-1,n=0,e=-1,o=!0,a=0,i=r.length-1;i>=0;--i){var u=r.charCodeAt(i);if(47!==u)-1===e&&(o=!1,e=i+1),46===u?-1===t?t=i:1!==a&&(a=1):-1!==t&&(a=-1);else if(!o){n=i+1;break}}return-1===t||-1===e||0===a||1===a&&t===e-1&&t===n+1?"":r.slice(t,e)},format:function(r){if(null===r||"object"!==(void 0===r?"undefined":n(r)))throw new TypeError('The "pathObject" argument must be of type Object. Received type '+(void 0===r?"undefined":n(r)));return function(r,t){var n=t.dir||t.root,e=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+e:n+r+e:e}("/",r)},parse:function(r){p(r);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===r.length)return t;var n,e=r.charCodeAt(0),o=47===e;o?(t.root="/",n=1):n=0;for(var a=-1,i=0,u=-1,f=!0,s=r.length-1,c=0;s>=n;--s)if(47!==(e=r.charCodeAt(s)))-1===u&&(f=!1,u=s+1),46===e?-1===a?a=s:1!==c&&(c=1):-1!==a&&(c=-1);else if(!f){i=s+1;break}return-1===a||-1===u||0===c||1===c&&a===u-1&&a===i+1?-1!==u&&(t.base=t.name=0===i&&o?r.slice(1,u):r.slice(i,u)):(0===i&&o?(t.name=r.slice(1,a),t.base=r.slice(1,u)):(t.name=r.slice(i,a),t.base=r.slice(i,u)),t.ext=r.slice(a,u)),i>0?t.dir=r.slice(0,i-1):o&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};v.posix=v;var g=v,d=function(){try{if(new Function("return this === window")())return!0}catch(r){}return!1}(),m=!d&&function(){try{if(new Function("return this === self")())return!0}catch(r){}return!1}(),A=!d&&!m&&function(){try{if(new Function("return this === global")())return!0}catch(r){}return!1}(),b=d?window:m?self:A?global:void 0,w={isBrowser:d,isWorker:m,isNode:A,scope:b},j=A?null:a({},g,{resolve:function(){for(var r=arguments.length,t=Array(r),n=0;n<r;n++)t[n]=arguments[n];return g.resolve.apply(g,["/"].concat(t))}}),x={resolve:j.resolve,normalize:j.normalize,join:j.join,relative:j.relative,dirname:j.dirname,basename:j.basename,extname:j.extname,delimiter:j.delimiter,sep:j.sep},C="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function O(r,t){return r(t={exports:{}},t.exports),t.exports}var S=O(function(r){var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(r,t){return r<<t|r>>>32-t},rotr:function(r,t){return r<<32-t|r>>>t},endian:function(r){if(r.constructor==Number)return 16711935&n.rotl(r,8)|4278255360&n.rotl(r,24);for(var t=0;t<r.length;t++)r[t]=n.endian(r[t]);return r},randomBytes:function(r){for(var t=[];r>0;r--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(r){for(var t=[],n=0,e=0;n<r.length;n++,e+=8)t[e>>>5]|=r[n]<<24-e%32;return t},wordsToBytes:function(r){for(var t=[],n=0;n<32*r.length;n+=8)t.push(r[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(r){for(var t=[],n=0;n<r.length;n++)t.push((r[n]>>>4).toString(16)),t.push((15&r[n]).toString(16));return t.join("")},hexToBytes:function(r){for(var t=[],n=0;n<r.length;n+=2)t.push(parseInt(r.substr(n,2),16));return t},bytesToBase64:function(r){for(var n=[],e=0;e<r.length;e+=3)for(var o=r[e]<<16|r[e+1]<<8|r[e+2],a=0;a<4;a++)8*e+6*a<=8*r.length?n.push(t.charAt(o>>>6*(3-a)&63)):n.push("=");return n.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],e=0,o=0;e<r.length;o=++e%4)0!=o&&n.push((t.indexOf(r.charAt(e-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(r.charAt(e))>>>6-2*o);return n}},r.exports=n}),M={utf8:{stringToBytes:function(r){return M.bin.stringToBytes(unescape(encodeURIComponent(r)))},bytesToString:function(r){return decodeURIComponent(escape(M.bin.bytesToString(r)))}},bin:{stringToBytes:function(r){for(var t=[],n=0;n<r.length;n++)t.push(255&r.charCodeAt(n));return t},bytesToString:function(r){for(var t=[],n=0;n<r.length;n++)t.push(String.fromCharCode(r[n]));return t.join("")}}},k=M,E=function(r){return null!=r&&(q(r)||function(r){return"function"==typeof r.readFloatLE&&"function"==typeof r.slice&&q(r.slice(0,0))}(r)||!!r._isBuffer)};function q(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}var T,N,I,P,B=O(function(r){var t,n,e,o,a;t=S,n=k.utf8,e=E,o=k.bin,(a=function r(a,i){a.constructor==String?a=i&&"binary"===i.encoding?o.stringToBytes(a):n.stringToBytes(a):e(a)?a=Array.prototype.slice.call(a,0):Array.isArray(a)||(a=a.toString());for(var u=t.bytesToWords(a),f=8*a.length,s=1732584193,c=-271733879,l=-1732584194,h=271733878,p=0;p<u.length;p++)u[p]=16711935&(u[p]<<8|u[p]>>>24)|4278255360&(u[p]<<24|u[p]>>>8);u[f>>>5]|=128<<f%32,u[14+(f+64>>>9<<4)]=f;var y=r._ff,v=r._gg,g=r._hh,d=r._ii;for(p=0;p<u.length;p+=16){var m=s,A=c,b=l,w=h;c=d(c=d(c=d(c=d(c=g(c=g(c=g(c=g(c=v(c=v(c=v(c=v(c=y(c=y(c=y(c=y(c,l=y(l,h=y(h,s=y(s,c,l,h,u[p+0],7,-680876936),c,l,u[p+1],12,-389564586),s,c,u[p+2],17,606105819),h,s,u[p+3],22,-1044525330),l=y(l,h=y(h,s=y(s,c,l,h,u[p+4],7,-176418897),c,l,u[p+5],12,1200080426),s,c,u[p+6],17,-1473231341),h,s,u[p+7],22,-45705983),l=y(l,h=y(h,s=y(s,c,l,h,u[p+8],7,1770035416),c,l,u[p+9],12,-1958414417),s,c,u[p+10],17,-42063),h,s,u[p+11],22,-1990404162),l=y(l,h=y(h,s=y(s,c,l,h,u[p+12],7,1804603682),c,l,u[p+13],12,-40341101),s,c,u[p+14],17,-1502002290),h,s,u[p+15],22,1236535329),l=v(l,h=v(h,s=v(s,c,l,h,u[p+1],5,-165796510),c,l,u[p+6],9,-1069501632),s,c,u[p+11],14,643717713),h,s,u[p+0],20,-373897302),l=v(l,h=v(h,s=v(s,c,l,h,u[p+5],5,-701558691),c,l,u[p+10],9,38016083),s,c,u[p+15],14,-660478335),h,s,u[p+4],20,-405537848),l=v(l,h=v(h,s=v(s,c,l,h,u[p+9],5,568446438),c,l,u[p+14],9,-1019803690),s,c,u[p+3],14,-187363961),h,s,u[p+8],20,1163531501),l=v(l,h=v(h,s=v(s,c,l,h,u[p+13],5,-1444681467),c,l,u[p+2],9,-51403784),s,c,u[p+7],14,1735328473),h,s,u[p+12],20,-1926607734),l=g(l,h=g(h,s=g(s,c,l,h,u[p+5],4,-378558),c,l,u[p+8],11,-2022574463),s,c,u[p+11],16,1839030562),h,s,u[p+14],23,-35309556),l=g(l,h=g(h,s=g(s,c,l,h,u[p+1],4,-1530992060),c,l,u[p+4],11,1272893353),s,c,u[p+7],16,-155497632),h,s,u[p+10],23,-1094730640),l=g(l,h=g(h,s=g(s,c,l,h,u[p+13],4,681279174),c,l,u[p+0],11,-358537222),s,c,u[p+3],16,-722521979),h,s,u[p+6],23,76029189),l=g(l,h=g(h,s=g(s,c,l,h,u[p+9],4,-640364487),c,l,u[p+12],11,-421815835),s,c,u[p+15],16,530742520),h,s,u[p+2],23,-995338651),l=d(l,h=d(h,s=d(s,c,l,h,u[p+0],6,-198630844),c,l,u[p+7],10,1126891415),s,c,u[p+14],15,-1416354905),h,s,u[p+5],21,-57434055),l=d(l,h=d(h,s=d(s,c,l,h,u[p+12],6,1700485571),c,l,u[p+3],10,-1894986606),s,c,u[p+10],15,-1051523),h,s,u[p+1],21,-2054922799),l=d(l,h=d(h,s=d(s,c,l,h,u[p+8],6,1873313359),c,l,u[p+15],10,-30611744),s,c,u[p+6],15,-1560198380),h,s,u[p+13],21,1309151649),l=d(l,h=d(h,s=d(s,c,l,h,u[p+4],6,-145523070),c,l,u[p+11],10,-1120210379),s,c,u[p+2],15,718787259),h,s,u[p+9],21,-343485551),s=s+m>>>0,c=c+A>>>0,l=l+b>>>0,h=h+w>>>0}return t.endian([s,c,l,h])})._ff=function(r,t,n,e,o,a,i){var u=r+(t&n|~t&e)+(o>>>0)+i;return(u<<a|u>>>32-a)+t},a._gg=function(r,t,n,e,o,a,i){var u=r+(t&e|n&~e)+(o>>>0)+i;return(u<<a|u>>>32-a)+t},a._hh=function(r,t,n,e,o,a,i){var u=r+(t^n^e)+(o>>>0)+i;return(u<<a|u>>>32-a)+t},a._ii=function(r,t,n,e,o,a,i){var u=r+(n^(t|~e))+(o>>>0)+i;return(u<<a|u>>>32-a)+t},a._blocksize=16,a._digestsize=16,r.exports=function(r,n){if(void 0===r||null===r)throw new Error("Illegal argument "+r);var e=t.wordsToBytes(a(r,n));return n&&n.asBytes?e:n&&n.asString?o.bytesToString(e):t.bytesToHex(e)}}),F={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},_=function(r){throw{name:"SyntaxError",message:r,at:T,text:I}},R=function(r){return r&&r!==N&&_("Expected '"+r+"' instead of '"+N+"'"),N=I.charAt(T),T+=1,N},U=function(){var r,t="";for("-"===N&&(t="-",R("-"));N>="0"&&N<="9";)t+=N,R();if("."===N)for(t+=".";R()&&N>="0"&&N<="9";)t+=N;if("e"===N||"E"===N)for(t+=N,R(),"-"!==N&&"+"!==N||(t+=N,R());N>="0"&&N<="9";)t+=N,R();if(r=+t,isFinite(r))return r;_("Bad number")},J=function(){var r,t,n,e="";if('"'===N)for(;R();){if('"'===N)return R(),e;if("\\"===N)if(R(),"u"===N){for(n=0,t=0;t<4&&(r=parseInt(R(),16),isFinite(r));t+=1)n=16*n+r;e+=String.fromCharCode(n)}else{if("string"!=typeof F[N])break;e+=F[N]}else e+=N}_("Bad string")},z=function(){for(;N&&N<=" ";)R()},L=function(){var r=[];if("["===N){if(R("["),z(),"]"===N)return R("]"),r;for(;N;){if(r.push(P()),z(),"]"===N)return R("]"),r;R(","),z()}}_("Bad array")},H=function(){var r,t={};if("{"===N){if(R("{"),z(),"}"===N)return R("}"),t;for(;N;){if(r=J(),z(),R(":"),Object.hasOwnProperty.call(t,r)&&_('Duplicate key "'+r+'"'),t[r]=P(),z(),"}"===N)return R("}"),t;R(","),z()}}_("Bad object")};P=function(){switch(z(),N){case"{":return H();case"[":return L();case'"':return J();case"-":return U();default:return N>="0"&&N<="9"?U():function(){switch(N){case"t":return R("t"),R("r"),R("u"),R("e"),!0;case"f":return R("f"),R("a"),R("l"),R("s"),R("e"),!1;case"n":return R("n"),R("u"),R("l"),R("l"),null}_("Unexpected '"+N+"'")}()}};var W,G,Z,V=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,Y={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function D(r){return V.lastIndex=0,V.test(r)?'"'+r.replace(V,function(r){var t=Y[r];return"string"==typeof t?t:"\\u"+("0000"+r.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+r+'"'}var X="undefined"!=typeof JSON?JSON:{parse:function(r,t){var e;return I=r,T=0,N=" ",e=P(),z(),N&&_("Syntax error"),"function"==typeof t?function r(e,o){var a,i,u=e[o];if(u&&"object"===(void 0===u?"undefined":n(u)))for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(void 0!==(i=r(u,a))?u[a]=i:delete u[a]);return t.call(e,o,u)}({"":e},""):e},stringify:function(r,t,e){var o;if(W="",G="","number"==typeof e)for(o=0;o<e;o+=1)G+=" ";else"string"==typeof e&&(G=e);if(Z=t,t&&"function"!=typeof t&&("object"!==(void 0===t?"undefined":n(t))||"number"!=typeof t.length))throw new Error("JSON.stringify");return function r(t,e){var o,a,i,u,f,s=W,c=e[t];switch(c&&"object"===(void 0===c?"undefined":n(c))&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),"function"==typeof Z&&(c=Z.call(e,t,c)),void 0===c?"undefined":n(c)){case"string":return D(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(W+=G,f=[],"[object Array]"===Object.prototype.toString.apply(c)){for(u=c.length,o=0;o<u;o+=1)f[o]=r(o,c)||"null";return i=0===f.length?"[]":W?"[\n"+W+f.join(",\n"+W)+"\n"+s+"]":"["+f.join(",")+"]",W=s,i}if(Z&&"object"===(void 0===Z?"undefined":n(Z)))for(u=Z.length,o=0;o<u;o+=1)"string"==typeof(a=Z[o])&&(i=r(a,c))&&f.push(D(a)+(W?": ":":")+i);else for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(i=r(a,c))&&f.push(D(a)+(W?": ":":")+i);return i=0===f.length?"{}":W?"{\n"+W+f.join(",\n"+W)+"\n"+s+"}":"{"+f.join(",")+"}",W=s,i}}("",{"":r})}},$=function(r,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var e=t.space||"";"number"==typeof e&&(e=Array(e+1).join(" "));var o,a="boolean"==typeof t.cycles&&t.cycles,i=t.replacer||function(r,t){return t},u=t.cmp&&(o=t.cmp,function(r){return function(t,n){var e={key:t,value:r[t]},a={key:n,value:r[n]};return o(e,a)}}),f=[];return function r(t,o,s,c){var l=e?"\n"+new Array(c+1).join(e):"",h=e?": ":":";if(s&&s.toJSON&&"function"==typeof s.toJSON&&(s=s.toJSON()),void 0!==(s=i.call(t,o,s))){if("object"!==(void 0===s?"undefined":n(s))||null===s)return X.stringify(s);if(K(s)){for(var p=[],y=0;y<s.length;y++){var v=r(s,y,s[y],c+1)||X.stringify(null);p.push(l+e+v)}return"["+p.join(",")+l+"]"}if(-1!==f.indexOf(s)){if(a)return X.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}f.push(s);var g=Q(s).sort(u&&u(s));for(p=[],y=0;y<g.length;y++){var d=r(s,o=g[y],s[o],c+1);if(d){var m=X.stringify(o)+h+d;p.push(l+e+m)}}return f.splice(f.indexOf(s),1),"{"+p.join(",")+l+"}"}}({"":r},"",r,0)},K=Array.isArray||function(r){return"[object Array]"==={}.toString.call(r)},Q=Object.keys||function(r){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var e in r)t.call(r,e)&&n.push(e);return n};function rr(r){return B($(r))}function tr(r){this.message=r}Object.setPrototypeOf(tr,Error),tr.prototype=Object.create(Error.prototype),tr.prototype.name="ImplementationError",tr.prototype.message="",tr.prototype.constructor=tr;var nr={lerp:function(r,t,n){return r+(t-r)*n},constrain:function(r,t,n){return r<t?t:r>n?n:r},map:function(r,t,n,e,o){return e+(r-t)/(n-t)*(o-e)},wrap:function(r,t,n){return r<t?n-(t-r)%(n-t):t+(r-t)%(n-t)},radians:function r(t){return Array.isArray(t)?t.map(r):.017453292519943295*t},degrees:function r(t){return Array.isArray(t)?t.map(r):57.29577951308232*t},sin:function r(t){return Array.isArray(t)?t.map(r):Math.sin(t)},cos:function r(t){return Array.isArray(t)?t.map(r):Math.cos(t)},tan:function r(t){return Array.isArray(t)?t.map(r):Math.tan(t)},asin:function r(t){return Array.isArray(t)?t.map(r):Math.asin(t)},acos:function r(t){return Array.isArray(t)?t.map(r):Math.acos(t)},atan:function r(t,n){return null!=n?Array.isArray(t)?t.map(function(t,e){return r(t,n[e])}):Math.atan2(t,n):Array.isArray(t)?t.map(function(t){return r(t)}):Math.atan(t)},pow:function r(t,n){return Array.isArray(t)?t.map(function(t,e){return r(t,n[e])}):Math.pow(t,n)},exp:function r(t){return Array.isArray(t)?t.map(r):Math.exp(t)},log:function r(t){return Array.isArray(t)?t.map(r):Math.log(t)},exp2:function r(t){return Array.isArray(t)?t.map(r):Math.pow(2,t)},log2:function r(t){return Array.isArray(t)?t.map(r):Math.log2(t)},sqrt:function r(t){return Array.isArray(t)?t.map(r):Math.sqrt(t)},inversesqrt:function r(t){return Array.isArray(t)?t.map(r):1/Math.sqrt(t)},abs:function r(t){return Array.isArray(t)?t.map(r):Math.abs(t)},sign:function r(t){return Array.isArray(t)?t.map(r):Math.sign(t)},floor:function r(t){return Array.isArray(t)?t.map(r):Math.floor(t)},ceil:function r(t){return Array.isArray(t)?t.map(r):Math.ceil(t)},fract:function r(t){return Array.isArray(t)?t.map(r):t-Math.floor(t)},mod:function r(t,n){return Array.isArray(t)?Array.isArray(n)?t.map(function(t,e){return r(t,n[e])}):t.map(function(t){return r(t,n)}):t%n},min:function r(t,n){return Array.isArray(t)?Array.isArray(n)?t.map(function(t,e){return r(t,n[e])}):t.map(function(t){return r(t,n)}):Math.min(t,n)},max:function r(t,n){return Array.isArray(t)?Array.isArray(n)?t.map(function(t,e){return r(t,n[e])}):t.map(function(t){return r(t,n)}):Math.max(t,n)},clamp:function r(t,n,e){return Array.isArray(t)?Array.isArray(n)?t.map(function(t,o){return r(t,n[o],e[o])}):t.map(function(t){return r(t,n,e)}):Math.min(Math.max(t,n),e)},mix:function r(t,n,e){return Array.isArray(t)?Array.isArray(e)?t.map(function(t,o){return r(t,n[o],e[o])}):t.map(function(t,o){return r(t,n[o],e)}):t*(1-e)+n*e},step:function r(t,n){return Array.isArray(n)?Array.isArray(t)?n.map(function(n,e){return r(t[e],n)}):n.map(function(n){return r(t,n)}):n<t?0:1},smoothstep:function r(t,n,e){if(Array.isArray(e))return Array.isArray(t)?e.map(function(e,o){return r(t[o],n[o],e)}):e.map(function(e){return r(t,n,e)});var o=Math.min(Math.max((e-t)/(n-t),0),1);return o*o*(3-2*o)},length:function(r){return Array.isArray(r)?Math.sqrt(r.reduce(function(r,t){return r+t*t},0)):Math.abs(r)},distance:function(r,t){return Array.isArray(r)?Math.sqrt(r.reduce(function(r,n,e){return r+(n-t[e])*(n-t[e])},0)):Math.abs(r-t)},dot:function(r,t){return Array.isArray(r)?r.reduce(function(r,n,e){return r+n*t[e]},0):r*t},cross:function(r,t){var n=i(r,3),e=n[0],o=n[1],a=n[2],u=i(t,3),f=u[0],s=u[1],c=u[2];return[o*c-a*s,a*f-e*c,e*s-o*f]},normalize:function(r){var t=r.reduce(function(r,t){return r+t*t},0);if(t>0){var n=1/Math.sqrt(t);return r.map(function(r){return r*n})}return Array(r.length).fill(0)},faceforward:function(r,t,n){return null==n&&(n=r),n.reduce(function(r,n,e){return r+n*t[e]},0)<0?r:r.map(function(r){return-r})},reflect:function(r,t){var n=t.reduce(function(t,n,e){return t+n*r[e]},0);return t.map(function(t,e){return r[e]-2*n*t})},refract:function(r,t,n){var e=t.reduce(function(t,n,e){return t+n*r[e]},0),o=1-n*n*(1-e*e);if(o>0){var a=n*e+Math.sqrt(o);return t.map(function(t,e){return n*r[e]-a*t})}return Array(t.length).fill(0)}},er={},or={},ar=34,ir=10,ur=13;function fr(r){return new Function("d","return {"+r.map(function(r,t){return JSON.stringify(r)+": d["+t+"]"}).join(",")+"}")}function sr(r){var t=new RegExp('["'+r+"\n\r]"),n=r.charCodeAt(0);function e(r,t){var e,o=[],a=r.length,i=0,u=0,f=a<=0,s=!1;function c(){if(f)return or;if(s)return s=!1,er;var t,e,o=i;if(r.charCodeAt(o)===ar){for(;i++<a&&r.charCodeAt(i)!==ar||r.charCodeAt(++i)===ar;);return(t=i)>=a?f=!0:(e=r.charCodeAt(i++))===ir?s=!0:e===ur&&(s=!0,r.charCodeAt(i)===ir&&++i),r.slice(o+1,t-1).replace(/""/g,'"')}for(;i<a;){if((e=r.charCodeAt(t=i++))===ir)s=!0;else if(e===ur)s=!0,r.charCodeAt(i)===ir&&++i;else if(e!==n)continue;return r.slice(o,t)}return f=!0,r.slice(o,a)}for(r.charCodeAt(a-1)===ir&&--a,r.charCodeAt(a-1)===ur&&--a;(e=c())!==or;){for(var l=[];e!==er&&e!==or;)l.push(e),e=c();t&&null==(l=t(l,u++))||o.push(l)}return o}function o(t){return t.map(a).join(r)}function a(r){return null==r?"":t.test(r+="")?'"'+r.replace(/"/g,'""')+'"':r}return{parse:function(r,t){var n,o,a=e(r,function(r,e){if(n)return n(r,e-1);o=r,n=t?function(r,t){var n=fr(r);return function(e,o){return t(n(e),o,r)}}(r,t):fr(r)});return a.columns=o||[],a},parseRows:e,format:function(t,n){return null==n&&(n=function(r){var t=Object.create(null),n=[];return r.forEach(function(r){for(var e in r)e in t||n.push(t[e]=e)}),n}(t)),[n.map(a).join(r)].concat(t.map(function(t){return n.map(function(r){return a(t[r])}).join(r)})).join("\n")},formatRows:function(r){return r.map(o).join("\n")}}}var cr=sr(",").parse,lr=sr("\t").parse,hr=null,pr=null,yr=function(r,t){if(t=t.split(":")[0],!(r=+r))return!1;switch(t){case"http":case"ws":return 80!==r;case"https":case"wss":return 443!==r;case"ftp":return 21!==r;case"gopher":return 70!==r;case"file":return!1}return 0!==r},vr=Object.prototype.hasOwnProperty;function gr(r){return decodeURIComponent(r.replace(/\+/g," "))}var dr={stringify:function(r,t){t=t||"";var n=[];for(var e in"string"!=typeof t&&(t="?"),r)vr.call(r,e)&&n.push(encodeURIComponent(e)+"="+encodeURIComponent(r[e]));return n.length?t+n.join("&"):""},parse:function(r){for(var t,n=/([^=?&]+)=?([^&]*)/g,e={};t=n.exec(r);){var o=gr(t[1]),a=gr(t[2]);o in e||(e[o]=a)}return e}},mr=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,Ar=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,br=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],wr={hash:1,query:1};function jr(r){var t,e=C&&C.location||{},o={},a=void 0===(r=r||e)?"undefined":n(r);if("blob:"===r.protocol)o=new Cr(unescape(r.pathname),{});else if("string"===a)for(t in o=new Cr(r,{}),wr)delete o[t];else if("object"===a){for(t in r)t in wr||(o[t]=r[t]);void 0===o.slashes&&(o.slashes=Ar.test(r.href))}return o}function xr(r){var t=mr.exec(r);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function Cr(r,t,e){if(!(this instanceof Cr))return new Cr(r,t,e);var o,a,i,u,f,s,c=br.slice(),l=void 0===t?"undefined":n(t),h=this,p=0;for("object"!==l&&"string"!==l&&(e=t,t=null),e&&"function"!=typeof e&&(e=dr.parse),t=jr(t),o=!(a=xr(r||"")).protocol&&!a.slashes,h.slashes=a.slashes||o&&t.slashes,h.protocol=a.protocol||t.protocol||"",r=a.rest,a.slashes||(c[2]=[/(.*)/,"pathname"]);p<c.length;p++)i=(u=c[p])[0],s=u[1],i!=i?h[s]=r:"string"==typeof i?~(f=r.indexOf(i))&&("number"==typeof u[2]?(h[s]=r.slice(0,f),r=r.slice(f+u[2])):(h[s]=r.slice(f),r=r.slice(0,f))):(f=i.exec(r))&&(h[s]=f[1],r=r.slice(0,f.index)),h[s]=h[s]||o&&u[3]&&t[s]||"",u[4]&&(h[s]=h[s].toLowerCase());e&&(h.query=e(h.query)),o&&t.slashes&&"/"!==h.pathname.charAt(0)&&(""!==h.pathname||""!==t.pathname)&&(h.pathname=function(r,t){for(var n=(t||"/").split("/").slice(0,-1).concat(r.split("/")),e=n.length,o=n[e-1],a=!1,i=0;e--;)"."===n[e]?n.splice(e,1):".."===n[e]?(n.splice(e,1),i++):i&&(0===e&&(a=!0),n.splice(e,1),i--);return a&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}(h.pathname,t.pathname)),yr(h.port,h.protocol)||(h.host=h.hostname,h.port=""),h.username=h.password="",h.auth&&(u=h.auth.split(":"),h.username=u[0]||"",h.password=u[1]||""),h.origin=h.protocol&&h.host&&"file:"!==h.protocol?h.protocol+"//"+h.host:"null",h.href=h.toString()}Cr.prototype={set:function(r,t,n){var e=this;switch(r){case"query":"string"==typeof t&&t.length&&(t=(n||dr.parse)(t)),e[r]=t;break;case"port":e[r]=t,yr(t,e.protocol)?t&&(e.host=e.hostname+":"+t):(e.host=e.hostname,e[r]="");break;case"hostname":e[r]=t,e.port&&(t+=":"+e.port),e.host=t;break;case"host":e[r]=t,/:\d+$/.test(t)?(t=t.split(":"),e.port=t.pop(),e.hostname=t.join(":")):(e.hostname=t,e.port="");break;case"protocol":e.protocol=t.toLowerCase(),e.slashes=!n;break;case"pathname":case"hash":if(t){var o="pathname"===r?"/":"#";e[r]=t.charAt(0)!==o?o+t:t}else e[r]=t;break;default:e[r]=t}for(var a=0;a<br.length;a++){var i=br[a];i[4]&&(e[i[1]]=e[i[1]].toLowerCase())}return e.origin=e.protocol&&e.host&&"file:"!==e.protocol?e.protocol+"//"+e.host:"null",e.href=e.toString(),e},toString:function(r){r&&"function"==typeof r||(r=dr.stringify);var t,e=this,o=e.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var a=o+(e.slashes?"//":"");return e.username&&(a+=e.username,e.password&&(a+=":"+e.password),a+="@"),a+=e.host+e.pathname,(t="object"===n(e.query)?r(e.query):e.query)&&(a+="?"!==t.charAt(0)?"?"+t:t),e.hash&&(a+=e.hash),a}},Cr.extractProtocol=xr,Cr.location=jr,Cr.qs=dr;var Or=Cr;function Sr(r,t){if(A){var n=function(r,t){var n=void 0,e=void 0,o=new Promise(function(){for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];n=t[0],e=t[1]});if(t.local)hr.readFile(r,t.encoding,function(r,t){r?e(r):n(t)}),o.abort=function(){};else{var a=pr({url:r,headers:t.headers||{},qs:t.query||{},encoding:t.encoding},function(r,t){r?e(r):((t.statusCode<200||t.statusCode>=300)&&e(t.statusCode),n(t.body))});a.on("abort",function(){e(0)}),o.abort=function(){a.abort()}}return o}(r,t);if("json"===t.type){var e=n.then(function(r){if("string"!=typeof r)throw new Error("Response is unexpectedly not a string");return JSON.parse(r)});return e.abort=function(){n.abort()},e}if("arraybuffer"===t.type){var o=n.then(function(r){if(!(r instanceof Buffer))throw new Error("Response is unexpectedly not a buffer");for(var t=new ArrayBuffer(r.length),n=new Uint8Array(t),e=0;e<r.length;++e)n[e]=r[e];return t});return o.abort=function(){n.abort()},o}return n}return function(r,t){var n=void 0,e=void 0,o=new Promise(function(){for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];n=t[0],e=t[1]}),a=new Or(r,!0);t.query&&a.set("query",Object.assign({},a.query,t.query));var i=new XMLHttpRequest;if(i.open("get",a.toString(),!0),t.headers)for(var u=Object.keys(t.headers),f=0;f<u.length;++f){var s=u[f];i.setRequestHeader(s,t.headers[s])}return i.responseType=t.type,i.addEventListener("loadend",function(r){i.status<200||i.status>=300?e(i.status):null!=i.response||"json"!==t.type?n(i.response):e(new Error("Could not parse JSON"))},!1),i.send(),o.abort=function(){i.abort()},o}(r,t)}function Mr(){for(var r=arguments.length,t=Array(r),n=0;n<r;n++)t[n]=arguments[n];var e=t[0],o=t[1];"string"!=typeof e&&(e=(o=e).url);if("string"!=typeof e)throw new Error("The first argument or options.url must be a string");return[e,o=Object.assign({},{type:"text",local:!1,encoding:"utf-8"},o)]}Object.assign(Sr,{text:function(){var r=Mr.apply(void 0,arguments),t=i(r,2),n=t[0],e=t[1];return e.type="text",Sr(n,e)},json:function(){var r=Mr.apply(void 0,arguments),t=i(r,2),n=t[0],e=t[1];return e.type="json",Sr(n,e)},buffer:function(){var r=Mr.apply(void 0,arguments),t=i(r,2),n=t[0],e=t[1];return e.type="arraybuffer",e.encoding=null,Sr(n,e)},csv:function(){var r=Mr.apply(void 0,arguments),t=i(r,2),n=t[0],e=t[1],o=this.text(n,e),a=o.then(function(r){return cr(r,e.row)});return a.abort=function(){o.abort()},a},tsv:function(){var r=Mr.apply(void 0,arguments),t=i(r,2),n=t[0],e=t[1],o=this.text(n,e),a=o.then(function(r){return lr(r,e.row)});return a.abort=function(){o.abort()},a}});var kr=t("Semaphore"),Er=function(){function r(t){e(this,r);var n=kr(this);n.capacity=t,n.available=t,n.queue=[]}return o(r,[{key:"wait",value:function(r){var t=kr(this),n=new function r(t,n){var o=this;e(this,r);var a=[new Promise(function(r,t){o.resolve=r,o.reject=t}),new Promise(function(r){o.permit=r}).then(function(){n(o.resolve,o.reject)})];this.promise=Promise.all(a).then(function(r){return t.signal(),r[0]},function(r){return t.signal(),Promise.reject(r)})}(this,r);return 0===t.available?t.queue.push(n):(--t.available,n.permit()),n.promise}},{key:"signal",value:function(){var r=kr(this);0===r.queue.length?++r.available:r.queue.shift().permit()}},{key:"capacity",get:function(){return kr(this).capacity}},{key:"available",get:function(){return kr(this).available}}]),r}();function qr(r){return r instanceof Int8Array||r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Int16Array||r instanceof Uint16Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array}function Tr(r,t,n){return r.slice(t,n)}function Nr(r,t,n){return r.subarray(t,n)}var Ir={forEach:function(r,t,n){for(var e=qr(r)?Nr:Tr,o=r.length-r.length%t,a=0,i=0;a<o;a+=t,++i)n(e(r,a,a+t),i)},some:function(r,t,n){for(var e=r.length-r.length%t,o=qr(r)?Nr:Tr,a=0,i=0;a<e;a+=t,++i)if(n(o(r,a,a+t),i))return!0;return!1},every:function(r,t,n){for(var e=r.length-r.length%t,o=qr(r)?Nr:Tr,a=0,i=0;a<e;a+=t,++i)if(!n(o(r,a,a+t),i))return!1;return!0},reduce:function(r,t,n,e){for(var o=e,a=r.length-r.length%t,i=qr(r)?Nr:Tr,u=0,f=0;u<a;u+=t,++f)o=n(o,i(r,u,u+t),f);return o},set:function(r,t,n){var e=r.length-r.length%t;if(qr(r))for(var o=0;o<e;o+=t)r.set(n,o);else for(var a=0;a<e;a+=t)for(var i=0;i<t;++i)r[a+i]=n[i];return r},transform:function(r,t,n){var e=r.length-r.length%t;if(qr(r))for(var o=0,a=0;o<e;o+=t,++a){var i=n(r.slice(o,o+t),a);r.set(i,o)}else for(var u=0,f=0;u<e;u+=t,++f)for(var s=0;s<t;++s){var c=n(r.slice(u,u+t),f);r[u+s]=c[s]}return r}},Pr={Aggregate:c,AggregateFunction:f,Array:l,AssertionError:h,FilePath:x,Global:w,Hash:rr,ImplementationError:tr,Math:nr,Namespace:t,Request:Sr,Semaphore:Er,Stride:Ir,URL:Or};r.Aggregate=c,r.AggregateFunction=f,r.Array=l,r.AssertionError=h,r.FilePath=x,r.Global=w,r.Hash=rr,r.ImplementationError=tr,r.Math=nr,r.Namespace=t,r.Request=Sr,r.Semaphore=Er,r.Stride=Ir,r.URL=Or,r.default=Pr,r.isBrowser=d,r.isWorker=m,r.isNode=A,r.globalScope=b,Object.defineProperty(r,"__esModule",{value:!0})});