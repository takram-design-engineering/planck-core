!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(r.Planck=r.Planck||{})}(this,function(r){"use strict";function n(r){var n=Symbol(r);return function(r,t){return null==r[n]&&(r[n]="function"==typeof t?t({}):{}),r[n]}}var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e=function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")},o=function(){function r(r,n){for(var t=0;t<n.length;t++){var e=n[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}return function(n,t,e){return t&&r(n.prototype,t),e&&r(n,e),n}}(),a=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}return r},i=function(){return function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,n){var t=[],e=!0,o=!1,a=void 0;try{for(var i,u=r[Symbol.iterator]();!(e=(i=u.next()).done)&&(t.push(i.value),!n||t.length!==n);e=!0);}catch(r){o=!0,a=r}finally{try{!e&&u.return&&u.return()}finally{if(o)throw a}}return t}(r,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=n("AggregateFunction"),s=function(){function r(n){if(e(this,r),n!==u)throw new Error("Use the static new function instead of new operator");for(var t=arguments.length,o=Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];u(this).targets=o}return o(r,[{key:"apply",value:function(r,n,t){for(var e=u(this).targets,o=[],a=0;a<e.length;++a)o.push(e[a].apply(n,t));return o}}],[{key:"new",value:function(){for(var r=arguments.length,n=Array(r),t=0;t<r;t++)n[t]=arguments[t];return new Proxy(function(){},new(Function.prototype.bind.apply(this,[null].concat([u],n))))}}]),r}(),f=n("Aggregate"),c=function(){function r(n){if(e(this,r),n!==f)throw new Error("Use the static new function instead of new operator");for(var t=arguments.length,o=Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];f(this).targets=o}return o(r,[{key:"set",value:function(r,n,t,e){for(var o=f(this).targets,a=0;a<o.length;++a)o[a][n]=t;return r[n]=t,!0}},{key:"get",value:function(r,n,t){var e=f(this).targets;if("function"!=typeof r[n]){var o=i(e,1)[0];return o&&o[n]}for(var a=[],u=0;u<e.length;++u){var c=e[u];a.push(c[n].bind(c))}return s.new.apply(s,a)}}],[{key:"new",value:function(){for(var r=arguments.length,n=Array(r),t=0;t<r;t++)n[t]=arguments[t];return new Proxy({},new(Function.prototype.bind.apply(this,[null].concat([f],n))))}}]),r}();var l={min:function(r,n){var t=void 0,e=Number.POSITIVE_INFINITY;if("function"!=typeof n){for(var o=0;o<r.length;++o){var a=r[o];a<e&&(t=a,e=a)}return t}for(var i=0;i<r.length;++i){var u=r[i],s=n(u,i);s<e&&(t=u,e=s)}return t},max:function(r,n){var t=void 0,e=Number.NEGATIVE_INFINITY;if("function"!=typeof n){for(var o=0;o<r.length;++o){var a=r[o];a>e&&(t=a,e=a)}return t}for(var i=0;i<r.length;++i){var u=r[i],s=n(u,i);s>e&&(t=u,e=s)}return t}};function p(r){this.message=r}Object.setPrototypeOf(p,Error),p.prototype=Object.create(Error.prototype),p.prototype.name="AssertionError",p.prototype.message="",p.prototype.constructor=p;var h="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function y(r,n){return r(n={exports:{}},n.exports),n.exports}var v=y(function(r,n){function t(r,n){for(var t=0,e=r.length-1;e>=0;e--){var o=r[e];"."===o?r.splice(e,1):".."===o?(r.splice(e,1),t++):t&&(r.splice(e,1),t--)}if(n)for(;t--;t)r.unshift("..");return r}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(r){return e.exec(r).slice(1)};function a(r,n){if(r.filter)return r.filter(n);for(var t=[],e=0;e<r.length;e++)n(r[e],e,r)&&t.push(r[e]);return t}n.resolve=function(){for(var r="",n=!1,e=arguments.length-1;e>=-1&&!n;e--){var o=e>=0?arguments[e]:process.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(r=o+"/"+r,n="/"===o.charAt(0))}return r=t(a(r.split("/"),function(r){return!!r}),!n).join("/"),(n?"/":"")+r||"."},n.normalize=function(r){var e=n.isAbsolute(r),o="/"===i(r,-1);return(r=t(a(r.split("/"),function(r){return!!r}),!e).join("/"))||e||(r="."),r&&o&&(r+="/"),(e?"/":"")+r},n.isAbsolute=function(r){return"/"===r.charAt(0)},n.join=function(){var r=Array.prototype.slice.call(arguments,0);return n.normalize(a(r,function(r,n){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},n.relative=function(r,t){function e(r){for(var n=0;n<r.length&&""===r[n];n++);for(var t=r.length-1;t>=0&&""===r[t];t--);return n>t?[]:r.slice(n,t-n+1)}r=n.resolve(r).substr(1),t=n.resolve(t).substr(1);for(var o=e(r.split("/")),a=e(t.split("/")),i=Math.min(o.length,a.length),u=i,s=0;s<i;s++)if(o[s]!==a[s]){u=s;break}var f=[];for(s=u;s<o.length;s++)f.push("..");return(f=f.concat(a.slice(u))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(r){var n=o(r),t=n[0],e=n[1];return t||e?(e&&(e=e.substr(0,e.length-1)),t+e):"."},n.basename=function(r,n){var t=o(r)[2];return n&&t.substr(-1*n.length)===n&&(t=t.substr(0,t.length-n.length)),t},n.extname=function(r){return o(r)[3]};var i="b"==="ab".substr(-1)?function(r,n,t){return r.substr(n,t)}:function(r,n,t){return n<0&&(n=r.length+n),r.substr(n,t)}}),g=(v.resolve,v.normalize,v.isAbsolute,v.join,v.relative,v.sep,v.delimiter,v.dirname,v.basename,v.extname,function(){try{if(new Function("return this === window")())return!0}catch(r){}return!1}()),d=!g&&function(){try{if(new Function("return this === self")())return!0}catch(r){}return!1}(),m=!g&&!d&&function(){try{if(new Function("return this === global")())return!0}catch(r){}return!1}(),b=g?window:d?self:m?global:void 0,A={isBrowser:g,isWorker:d,isNode:m,scope:b},w=m?null:a({},v,{resolve:function(){for(var r=arguments.length,n=Array(r),t=0;t<r;t++)n[t]=arguments[t];return v.resolve.apply(v,["/"].concat(n))}}),j={resolve:w.resolve,normalize:w.normalize,join:w.join,relative:w.relative,dirname:w.dirname,basename:w.basename,extname:w.extname,delimiter:w.delimiter,sep:w.sep},x=y(function(r){var n,t;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(r,n){return r<<n|r>>>32-n},rotr:function(r,n){return r<<32-n|r>>>n},endian:function(r){if(r.constructor==Number)return 16711935&t.rotl(r,8)|4278255360&t.rotl(r,24);for(var n=0;n<r.length;n++)r[n]=t.endian(r[n]);return r},randomBytes:function(r){for(var n=[];r>0;r--)n.push(Math.floor(256*Math.random()));return n},bytesToWords:function(r){for(var n=[],t=0,e=0;t<r.length;t++,e+=8)n[e>>>5]|=r[t]<<24-e%32;return n},wordsToBytes:function(r){for(var n=[],t=0;t<32*r.length;t+=8)n.push(r[t>>>5]>>>24-t%32&255);return n},bytesToHex:function(r){for(var n=[],t=0;t<r.length;t++)n.push((r[t]>>>4).toString(16)),n.push((15&r[t]).toString(16));return n.join("")},hexToBytes:function(r){for(var n=[],t=0;t<r.length;t+=2)n.push(parseInt(r.substr(t,2),16));return n},bytesToBase64:function(r){for(var t=[],e=0;e<r.length;e+=3)for(var o=r[e]<<16|r[e+1]<<8|r[e+2],a=0;a<4;a++)8*e+6*a<=8*r.length?t.push(n.charAt(o>>>6*(3-a)&63)):t.push("=");return t.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],e=0,o=0;e<r.length;o=++e%4)0!=o&&t.push((n.indexOf(r.charAt(e-1))&Math.pow(2,-2*o+8)-1)<<2*o|n.indexOf(r.charAt(e))>>>6-2*o);return t}},r.exports=t}),S={utf8:{stringToBytes:function(r){return S.bin.stringToBytes(unescape(encodeURIComponent(r)))},bytesToString:function(r){return decodeURIComponent(escape(S.bin.bytesToString(r)))}},bin:{stringToBytes:function(r){for(var n=[],t=0;t<r.length;t++)n.push(255&r.charCodeAt(t));return n},bytesToString:function(r){for(var n=[],t=0;t<r.length;t++)n.push(String.fromCharCode(r[t]));return n.join("")}}},O=S,M=function(r){return null!=r&&(E(r)||function(r){return"function"==typeof r.readFloatLE&&"function"==typeof r.slice&&E(r.slice(0,0))}(r)||!!r._isBuffer)};function E(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}var C,q,T,k,N=y(function(r){var n,t,e,o,a;n=x,t=O.utf8,e=M,o=O.bin,(a=function r(a,i){a.constructor==String?a=i&&"binary"===i.encoding?o.stringToBytes(a):t.stringToBytes(a):e(a)?a=Array.prototype.slice.call(a,0):Array.isArray(a)||(a=a.toString());for(var u=n.bytesToWords(a),s=8*a.length,f=1732584193,c=-271733879,l=-1732584194,p=271733878,h=0;h<u.length;h++)u[h]=16711935&(u[h]<<8|u[h]>>>24)|4278255360&(u[h]<<24|u[h]>>>8);u[s>>>5]|=128<<s%32,u[14+(s+64>>>9<<4)]=s;var y=r._ff,v=r._gg,g=r._hh,d=r._ii;for(h=0;h<u.length;h+=16){var m=f,b=c,A=l,w=p;c=d(c=d(c=d(c=d(c=g(c=g(c=g(c=g(c=v(c=v(c=v(c=v(c=y(c=y(c=y(c=y(c,l=y(l,p=y(p,f=y(f,c,l,p,u[h+0],7,-680876936),c,l,u[h+1],12,-389564586),f,c,u[h+2],17,606105819),p,f,u[h+3],22,-1044525330),l=y(l,p=y(p,f=y(f,c,l,p,u[h+4],7,-176418897),c,l,u[h+5],12,1200080426),f,c,u[h+6],17,-1473231341),p,f,u[h+7],22,-45705983),l=y(l,p=y(p,f=y(f,c,l,p,u[h+8],7,1770035416),c,l,u[h+9],12,-1958414417),f,c,u[h+10],17,-42063),p,f,u[h+11],22,-1990404162),l=y(l,p=y(p,f=y(f,c,l,p,u[h+12],7,1804603682),c,l,u[h+13],12,-40341101),f,c,u[h+14],17,-1502002290),p,f,u[h+15],22,1236535329),l=v(l,p=v(p,f=v(f,c,l,p,u[h+1],5,-165796510),c,l,u[h+6],9,-1069501632),f,c,u[h+11],14,643717713),p,f,u[h+0],20,-373897302),l=v(l,p=v(p,f=v(f,c,l,p,u[h+5],5,-701558691),c,l,u[h+10],9,38016083),f,c,u[h+15],14,-660478335),p,f,u[h+4],20,-405537848),l=v(l,p=v(p,f=v(f,c,l,p,u[h+9],5,568446438),c,l,u[h+14],9,-1019803690),f,c,u[h+3],14,-187363961),p,f,u[h+8],20,1163531501),l=v(l,p=v(p,f=v(f,c,l,p,u[h+13],5,-1444681467),c,l,u[h+2],9,-51403784),f,c,u[h+7],14,1735328473),p,f,u[h+12],20,-1926607734),l=g(l,p=g(p,f=g(f,c,l,p,u[h+5],4,-378558),c,l,u[h+8],11,-2022574463),f,c,u[h+11],16,1839030562),p,f,u[h+14],23,-35309556),l=g(l,p=g(p,f=g(f,c,l,p,u[h+1],4,-1530992060),c,l,u[h+4],11,1272893353),f,c,u[h+7],16,-155497632),p,f,u[h+10],23,-1094730640),l=g(l,p=g(p,f=g(f,c,l,p,u[h+13],4,681279174),c,l,u[h+0],11,-358537222),f,c,u[h+3],16,-722521979),p,f,u[h+6],23,76029189),l=g(l,p=g(p,f=g(f,c,l,p,u[h+9],4,-640364487),c,l,u[h+12],11,-421815835),f,c,u[h+15],16,530742520),p,f,u[h+2],23,-995338651),l=d(l,p=d(p,f=d(f,c,l,p,u[h+0],6,-198630844),c,l,u[h+7],10,1126891415),f,c,u[h+14],15,-1416354905),p,f,u[h+5],21,-57434055),l=d(l,p=d(p,f=d(f,c,l,p,u[h+12],6,1700485571),c,l,u[h+3],10,-1894986606),f,c,u[h+10],15,-1051523),p,f,u[h+1],21,-2054922799),l=d(l,p=d(p,f=d(f,c,l,p,u[h+8],6,1873313359),c,l,u[h+15],10,-30611744),f,c,u[h+6],15,-1560198380),p,f,u[h+13],21,1309151649),l=d(l,p=d(p,f=d(f,c,l,p,u[h+4],6,-145523070),c,l,u[h+11],10,-1120210379),f,c,u[h+2],15,718787259),p,f,u[h+9],21,-343485551),f=f+m>>>0,c=c+b>>>0,l=l+A>>>0,p=p+w>>>0}return n.endian([f,c,l,p])})._ff=function(r,n,t,e,o,a,i){var u=r+(n&t|~n&e)+(o>>>0)+i;return(u<<a|u>>>32-a)+n},a._gg=function(r,n,t,e,o,a,i){var u=r+(n&e|t&~e)+(o>>>0)+i;return(u<<a|u>>>32-a)+n},a._hh=function(r,n,t,e,o,a,i){var u=r+(n^t^e)+(o>>>0)+i;return(u<<a|u>>>32-a)+n},a._ii=function(r,n,t,e,o,a,i){var u=r+(t^(n|~e))+(o>>>0)+i;return(u<<a|u>>>32-a)+n},a._blocksize=16,a._digestsize=16,r.exports=function(r,t){if(void 0===r||null===r)throw new Error("Illegal argument "+r);var e=n.wordsToBytes(a(r,t));return t&&t.asBytes?e:t&&t.asString?o.bytesToString(e):n.bytesToHex(e)}}),I={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},P=function(r){throw{name:"SyntaxError",message:r,at:C,text:T}},B=function(r){return r&&r!==q&&P("Expected '"+r+"' instead of '"+q+"'"),q=T.charAt(C),C+=1,q},F=function(){var r,n="";for("-"===q&&(n="-",B("-"));q>="0"&&q<="9";)n+=q,B();if("."===q)for(n+=".";B()&&q>="0"&&q<="9";)n+=q;if("e"===q||"E"===q)for(n+=q,B(),"-"!==q&&"+"!==q||(n+=q,B());q>="0"&&q<="9";)n+=q,B();if(r=+n,isFinite(r))return r;P("Bad number")},_=function(){var r,n,t,e="";if('"'===q)for(;B();){if('"'===q)return B(),e;if("\\"===q)if(B(),"u"===q){for(t=0,n=0;n<4&&(r=parseInt(B(),16),isFinite(r));n+=1)t=16*t+r;e+=String.fromCharCode(t)}else{if("string"!=typeof I[q])break;e+=I[q]}else e+=q}P("Bad string")},R=function(){for(;q&&q<=" ";)B()},U=function(){var r=[];if("["===q){if(B("["),R(),"]"===q)return B("]"),r;for(;q;){if(r.push(k()),R(),"]"===q)return B("]"),r;B(","),R()}}P("Bad array")},z=function(){var r,n={};if("{"===q){if(B("{"),R(),"}"===q)return B("}"),n;for(;q;){if(r=_(),R(),B(":"),Object.hasOwnProperty.call(n,r)&&P('Duplicate key "'+r+'"'),n[r]=k(),R(),"}"===q)return B("}"),n;B(","),R()}}P("Bad object")};k=function(){switch(R(),q){case"{":return z();case"[":return U();case'"':return _();case"-":return F();default:return q>="0"&&q<="9"?F():function(){switch(q){case"t":return B("t"),B("r"),B("u"),B("e"),!0;case"f":return B("f"),B("a"),B("l"),B("s"),B("e"),!1;case"n":return B("n"),B("u"),B("l"),B("l"),null}P("Unexpected '"+q+"'")}()}};var J,L,H,W=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,G={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function Z(r){return W.lastIndex=0,W.test(r)?'"'+r.replace(W,function(r){var n=G[r];return"string"==typeof n?n:"\\u"+("0000"+r.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+r+'"'}var V="undefined"!=typeof JSON?JSON:{parse:function(r,n){var e;return T=r,C=0,q=" ",e=k(),R(),q&&P("Syntax error"),"function"==typeof n?function r(e,o){var a,i,u=e[o];if(u&&"object"===(void 0===u?"undefined":t(u)))for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(void 0!==(i=r(u,a))?u[a]=i:delete u[a]);return n.call(e,o,u)}({"":e},""):e},stringify:function(r,n,e){var o;if(J="",L="","number"==typeof e)for(o=0;o<e;o+=1)L+=" ";else"string"==typeof e&&(L=e);if(H=n,n&&"function"!=typeof n&&("object"!==(void 0===n?"undefined":t(n))||"number"!=typeof n.length))throw new Error("JSON.stringify");return function r(n,e){var o,a,i,u,s,f=J,c=e[n];switch(c&&"object"===(void 0===c?"undefined":t(c))&&"function"==typeof c.toJSON&&(c=c.toJSON(n)),"function"==typeof H&&(c=H.call(e,n,c)),void 0===c?"undefined":t(c)){case"string":return Z(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(J+=L,s=[],"[object Array]"===Object.prototype.toString.apply(c)){for(u=c.length,o=0;o<u;o+=1)s[o]=r(o,c)||"null";return i=0===s.length?"[]":J?"[\n"+J+s.join(",\n"+J)+"\n"+f+"]":"["+s.join(",")+"]",J=f,i}if(H&&"object"===(void 0===H?"undefined":t(H)))for(u=H.length,o=0;o<u;o+=1)"string"==typeof(a=H[o])&&(i=r(a,c))&&s.push(Z(a)+(J?": ":":")+i);else for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(i=r(a,c))&&s.push(Z(a)+(J?": ":":")+i);return i=0===s.length?"{}":J?"{\n"+J+s.join(",\n"+J)+"\n"+f+"}":"{"+s.join(",")+"}",J=f,i}}("",{"":r})}},Y=function(r,n){n||(n={}),"function"==typeof n&&(n={cmp:n});var e=n.space||"";"number"==typeof e&&(e=Array(e+1).join(" "));var o,a="boolean"==typeof n.cycles&&n.cycles,i=n.replacer||function(r,n){return n},u=n.cmp&&(o=n.cmp,function(r){return function(n,t){var e={key:n,value:r[n]},a={key:t,value:r[t]};return o(e,a)}}),s=[];return function r(n,o,f,c){var l=e?"\n"+new Array(c+1).join(e):"",p=e?": ":":";if(f&&f.toJSON&&"function"==typeof f.toJSON&&(f=f.toJSON()),void 0!==(f=i.call(n,o,f))){if("object"!==(void 0===f?"undefined":t(f))||null===f)return V.stringify(f);if($(f)){for(var h=[],y=0;y<f.length;y++){var v=r(f,y,f[y],c+1)||V.stringify(null);h.push(l+e+v)}return"["+h.join(",")+l+"]"}if(-1!==s.indexOf(f)){if(a)return V.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}s.push(f);var g=D(f).sort(u&&u(f));for(h=[],y=0;y<g.length;y++){var d=r(f,o=g[y],f[o],c+1);if(d){var m=V.stringify(o)+p+d;h.push(l+e+m)}}return s.splice(s.indexOf(f),1),"{"+h.join(",")+l+"}"}}({"":r},"",r,0)},$=Array.isArray||function(r){return"[object Array]"==={}.toString.call(r)},D=Object.keys||function(r){var n=Object.prototype.hasOwnProperty||function(){return!0},t=[];for(var e in r)n.call(r,e)&&t.push(e);return t};function X(r){return N(Y(r))}function K(r){this.message=r}Object.setPrototypeOf(K,Error),K.prototype=Object.create(Error.prototype),K.prototype.name="ImplementationError",K.prototype.message="",K.prototype.constructor=K;var Q={lerp:function(r,n,t){return r+(n-r)*t},constrain:function(r,n,t){return r<n?n:r>t?t:r},map:function(r,n,t,e,o){return e+(r-n)/(t-n)*(o-e)},wrap:function(r,n,t){return r<n?t-(n-r)%(t-n):n+(r-n)%(t-n)},radians:function r(n){return Array.isArray(n)?n.map(r):.017453292519943295*n},degrees:function r(n){return Array.isArray(n)?n.map(r):57.29577951308232*n},sin:function r(n){return Array.isArray(n)?n.map(r):Math.sin(n)},cos:function r(n){return Array.isArray(n)?n.map(r):Math.cos(n)},tan:function r(n){return Array.isArray(n)?n.map(r):Math.tan(n)},asin:function r(n){return Array.isArray(n)?n.map(r):Math.asin(n)},acos:function r(n){return Array.isArray(n)?n.map(r):Math.acos(n)},atan:function r(n,t){return null!=t?Array.isArray(n)?n.map(function(n,e){return r(n,t[e])}):Math.atan2(n,t):Array.isArray(n)?n.map(function(n){return r(n)}):Math.atan(n)},pow:function r(n,t){return Array.isArray(n)?n.map(function(n,e){return r(n,t[e])}):Math.pow(n,t)},exp:function r(n){return Array.isArray(n)?n.map(r):Math.exp(n)},log:function r(n){return Array.isArray(n)?n.map(r):Math.log(n)},exp2:function r(n){return Array.isArray(n)?n.map(r):Math.pow(2,n)},log2:function r(n){return Array.isArray(n)?n.map(r):Math.log2(n)},sqrt:function r(n){return Array.isArray(n)?n.map(r):Math.sqrt(n)},inversesqrt:function r(n){return Array.isArray(n)?n.map(r):1/Math.sqrt(n)},abs:function r(n){return Array.isArray(n)?n.map(r):Math.abs(n)},sign:function r(n){return Array.isArray(n)?n.map(r):Math.sign(n)},floor:function r(n){return Array.isArray(n)?n.map(r):Math.floor(n)},ceil:function r(n){return Array.isArray(n)?n.map(r):Math.ceil(n)},fract:function r(n){return Array.isArray(n)?n.map(r):n-Math.floor(n)},mod:function r(n,t){return Array.isArray(n)?Array.isArray(t)?n.map(function(n,e){return r(n,t[e])}):n.map(function(n){return r(n,t)}):n%t},min:function r(n,t){return Array.isArray(n)?Array.isArray(t)?n.map(function(n,e){return r(n,t[e])}):n.map(function(n){return r(n,t)}):Math.min(n,t)},max:function r(n,t){return Array.isArray(n)?Array.isArray(t)?n.map(function(n,e){return r(n,t[e])}):n.map(function(n){return r(n,t)}):Math.max(n,t)},clamp:function r(n,t,e){return Array.isArray(n)?Array.isArray(t)?n.map(function(n,o){return r(n,t[o],e[o])}):n.map(function(n){return r(n,t,e)}):Math.min(Math.max(n,t),e)},mix:function r(n,t,e){return Array.isArray(n)?Array.isArray(e)?n.map(function(n,o){return r(n,t[o],e[o])}):n.map(function(n,o){return r(n,t[o],e)}):n*(1-e)+t*e},step:function r(n,t){return Array.isArray(t)?Array.isArray(n)?t.map(function(t,e){return r(n[e],t)}):t.map(function(t){return r(n,t)}):t<n?0:1},smoothstep:function r(n,t,e){if(Array.isArray(e))return Array.isArray(n)?e.map(function(e,o){return r(n[o],t[o],e)}):e.map(function(e){return r(n,t,e)});var o=Math.min(Math.max((e-n)/(t-n),0),1);return o*o*(3-2*o)},length:function(r){return Array.isArray(r)?Math.sqrt(r.reduce(function(r,n){return r+n*n},0)):Math.abs(r)},distance:function(r,n){return Array.isArray(r)?Math.sqrt(r.reduce(function(r,t,e){return r+(t-n[e])*(t-n[e])},0)):Math.abs(r-n)},dot:function(r,n){return Array.isArray(r)?r.reduce(function(r,t,e){return r+t*n[e]},0):r*n},cross:function(r,n){var t=i(r,3),e=t[0],o=t[1],a=t[2],u=i(n,3),s=u[0],f=u[1],c=u[2];return[o*c-a*f,a*s-e*c,e*f-o*s]},normalize:function(r){var n=r.reduce(function(r,n){return r+n*n},0);if(n>0){var t=1/Math.sqrt(n);return r.map(function(r){return r*t})}return Array(r.length).fill(0)},faceforward:function(r,n,t){return null==t&&(t=r),t.reduce(function(r,t,e){return r+t*n[e]},0)<0?r:r.map(function(r){return-r})},reflect:function(r,n){var t=n.reduce(function(n,t,e){return n+t*r[e]},0);return n.map(function(n,e){return r[e]-2*t*n})},refract:function(r,n,t){var e=n.reduce(function(n,t,e){return n+t*r[e]},0),o=1-t*t*(1-e*e);if(o>0){var a=t*e+Math.sqrt(o);return n.map(function(n,e){return t*r[e]-a*n})}return Array(n.length).fill(0)}},rr={},nr={},tr=34,er=10,or=13;function ar(r){return new Function("d","return {"+r.map(function(r,n){return JSON.stringify(r)+": d["+n+"]"}).join(",")+"}")}function ir(r){var n=new RegExp('["'+r+"\n\r]"),t=r.charCodeAt(0);function e(r,n){var e,o=[],a=r.length,i=0,u=0,s=a<=0,f=!1;function c(){if(s)return nr;if(f)return f=!1,rr;var n,e,o=i;if(r.charCodeAt(o)===tr){for(;i++<a&&r.charCodeAt(i)!==tr||r.charCodeAt(++i)===tr;);return(n=i)>=a?s=!0:(e=r.charCodeAt(i++))===er?f=!0:e===or&&(f=!0,r.charCodeAt(i)===er&&++i),r.slice(o+1,n-1).replace(/""/g,'"')}for(;i<a;){if((e=r.charCodeAt(n=i++))===er)f=!0;else if(e===or)f=!0,r.charCodeAt(i)===er&&++i;else if(e!==t)continue;return r.slice(o,n)}return s=!0,r.slice(o,a)}for(r.charCodeAt(a-1)===er&&--a,r.charCodeAt(a-1)===or&&--a;(e=c())!==nr;){for(var l=[];e!==rr&&e!==nr;)l.push(e),e=c();n&&null==(l=n(l,u++))||o.push(l)}return o}function o(n){return n.map(a).join(r)}function a(r){return null==r?"":n.test(r+="")?'"'+r.replace(/"/g,'""')+'"':r}return{parse:function(r,n){var t,o,a=e(r,function(r,e){if(t)return t(r,e-1);o=r,t=n?function(r,n){var t=ar(r);return function(e,o){return n(t(e),o,r)}}(r,n):ar(r)});return a.columns=o||[],a},parseRows:e,format:function(n,t){return null==t&&(t=function(r){var n=Object.create(null),t=[];return r.forEach(function(r){for(var e in r)e in n||t.push(n[e]=e)}),t}(n)),[t.map(a).join(r)].concat(n.map(function(n){return t.map(function(r){return a(n[r])}).join(r)})).join("\n")},formatRows:function(r){return r.map(o).join("\n")}}}var ur=ir(",").parse,sr=ir("\t").parse,fr=null,cr=null,lr=function(r,n){if(n=n.split(":")[0],!(r=+r))return!1;switch(n){case"http":case"ws":return 80!==r;case"https":case"wss":return 443!==r;case"ftp":return 21!==r;case"gopher":return 70!==r;case"file":return!1}return 0!==r},pr=Object.prototype.hasOwnProperty;function hr(r){return decodeURIComponent(r.replace(/\+/g," "))}var yr={stringify:function(r,n){n=n||"";var t=[];for(var e in"string"!=typeof n&&(n="?"),r)pr.call(r,e)&&t.push(encodeURIComponent(e)+"="+encodeURIComponent(r[e]));return t.length?n+t.join("&"):""},parse:function(r){for(var n,t=/([^=?&]+)=?([^&]*)/g,e={};n=t.exec(r);){var o=hr(n[1]),a=hr(n[2]);o in e||(e[o]=a)}return e}},vr=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,gr=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,dr=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],mr={hash:1,query:1};function br(r){var n,e={},o=void 0===(r=r||h.location||{})?"undefined":t(r);if("blob:"===r.protocol)e=new wr(unescape(r.pathname),{});else if("string"===o)for(n in e=new wr(r,{}),mr)delete e[n];else if("object"===o){for(n in r)n in mr||(e[n]=r[n]);void 0===e.slashes&&(e.slashes=gr.test(r.href))}return e}function Ar(r){var n=vr.exec(r);return{protocol:n[1]?n[1].toLowerCase():"",slashes:!!n[2],rest:n[3]}}function wr(r,n,e){if(!(this instanceof wr))return new wr(r,n,e);var o,a,i,u,s,f,c=dr.slice(),l=void 0===n?"undefined":t(n),p=this,h=0;for("object"!==l&&"string"!==l&&(e=n,n=null),e&&"function"!=typeof e&&(e=yr.parse),n=br(n),o=!(a=Ar(r||"")).protocol&&!a.slashes,p.slashes=a.slashes||o&&n.slashes,p.protocol=a.protocol||n.protocol||"",r=a.rest,a.slashes||(c[2]=[/(.*)/,"pathname"]);h<c.length;h++)i=(u=c[h])[0],f=u[1],i!=i?p[f]=r:"string"==typeof i?~(s=r.indexOf(i))&&("number"==typeof u[2]?(p[f]=r.slice(0,s),r=r.slice(s+u[2])):(p[f]=r.slice(s),r=r.slice(0,s))):(s=i.exec(r))&&(p[f]=s[1],r=r.slice(0,s.index)),p[f]=p[f]||o&&u[3]&&n[f]||"",u[4]&&(p[f]=p[f].toLowerCase());e&&(p.query=e(p.query)),o&&n.slashes&&"/"!==p.pathname.charAt(0)&&(""!==p.pathname||""!==n.pathname)&&(p.pathname=function(r,n){for(var t=(n||"/").split("/").slice(0,-1).concat(r.split("/")),e=t.length,o=t[e-1],a=!1,i=0;e--;)"."===t[e]?t.splice(e,1):".."===t[e]?(t.splice(e,1),i++):i&&(0===e&&(a=!0),t.splice(e,1),i--);return a&&t.unshift(""),"."!==o&&".."!==o||t.push(""),t.join("/")}(p.pathname,n.pathname)),lr(p.port,p.protocol)||(p.host=p.hostname,p.port=""),p.username=p.password="",p.auth&&(u=p.auth.split(":"),p.username=u[0]||"",p.password=u[1]||""),p.origin=p.protocol&&p.host&&"file:"!==p.protocol?p.protocol+"//"+p.host:"null",p.href=p.toString()}wr.prototype={set:function(r,n,t){var e=this;switch(r){case"query":"string"==typeof n&&n.length&&(n=(t||yr.parse)(n)),e[r]=n;break;case"port":e[r]=n,lr(n,e.protocol)?n&&(e.host=e.hostname+":"+n):(e.host=e.hostname,e[r]="");break;case"hostname":e[r]=n,e.port&&(n+=":"+e.port),e.host=n;break;case"host":e[r]=n,/:\d+$/.test(n)?(n=n.split(":"),e.port=n.pop(),e.hostname=n.join(":")):(e.hostname=n,e.port="");break;case"protocol":e.protocol=n.toLowerCase(),e.slashes=!t;break;case"pathname":case"hash":if(n){var o="pathname"===r?"/":"#";e[r]=n.charAt(0)!==o?o+n:n}else e[r]=n;break;default:e[r]=n}for(var a=0;a<dr.length;a++){var i=dr[a];i[4]&&(e[i[1]]=e[i[1]].toLowerCase())}return e.origin=e.protocol&&e.host&&"file:"!==e.protocol?e.protocol+"//"+e.host:"null",e.href=e.toString(),e},toString:function(r){r&&"function"==typeof r||(r=yr.stringify);var n,e=this,o=e.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var a=o+(e.slashes?"//":"");return e.username&&(a+=e.username,e.password&&(a+=":"+e.password),a+="@"),a+=e.host+e.pathname,(n="object"===t(e.query)?r(e.query):e.query)&&(a+="?"!==n.charAt(0)?"?"+n:n),e.hash&&(a+=e.hash),a}},wr.extractProtocol=Ar,wr.location=br,wr.qs=yr;var jr=wr;function xr(r,n){if(m){var t=function(r,n){var t=void 0,e=void 0,o=new Promise(function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];t=n[0],e=n[1]});if(n.local)fr.readFile(r,n.encoding,function(r,n){r?e(r):t(n)}),o.abort=function(){};else{var a=cr({url:r,headers:n.headers||{},qs:n.query||{},encoding:n.encoding},function(r,n){r?e(r):((n.statusCode<200||n.statusCode>=300)&&e(n.statusCode),t(n.body))});a.on("abort",function(){e(0)}),o.abort=function(){a.abort()}}return o}(r,n);if("json"===n.type){var e=t.then(function(r){if("string"!=typeof r)throw new Error("Response is unexpectedly not a string");return JSON.parse(r)});return e.abort=function(){t.abort()},e}if("arraybuffer"===n.type){var o=t.then(function(r){if(!(r instanceof Buffer))throw new Error("Response is unexpectedly not a buffer");for(var n=new ArrayBuffer(r.length),t=new Uint8Array(n),e=0;e<r.length;++e)t[e]=r[e];return n});return o.abort=function(){t.abort()},o}return t}return function(r,n){var t=void 0,e=void 0,o=new Promise(function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];t=n[0],e=n[1]}),a=new jr(r,!0);n.query&&a.set("query",Object.assign({},a.query,n.query));var i=new XMLHttpRequest;if(i.open("get",a.toString(),!0),n.headers)for(var u=Object.keys(n.headers),s=0;s<u.length;++s){var f=u[s];i.setRequestHeader(f,n.headers[f])}return i.responseType=n.type,i.addEventListener("loadend",function(r){i.status<200||i.status>=300?e(i.status):null!=i.response||"json"!==n.type?t(i.response):e(new Error("Could not parse JSON"))},!1),i.send(),o.abort=function(){i.abort()},o}(r,n)}function Sr(){for(var r=arguments.length,n=Array(r),t=0;t<r;t++)n[t]=arguments[t];var e=n[0],o=n[1];"string"!=typeof e&&(e=(o=e).url);if("string"!=typeof e)throw new Error("The first argument or options.url must be a string");return[e,o=Object.assign({},{type:"text",local:!1,encoding:"utf-8"},o)]}Object.assign(xr,{text:function(){var r=Sr.apply(void 0,arguments),n=i(r,2),t=n[0],e=n[1];return e.type="text",xr(t,e)},json:function(){var r=Sr.apply(void 0,arguments),n=i(r,2),t=n[0],e=n[1];return e.type="json",xr(t,e)},buffer:function(){var r=Sr.apply(void 0,arguments),n=i(r,2),t=n[0],e=n[1];return e.type="arraybuffer",e.encoding=null,xr(t,e)},csv:function(){var r=Sr.apply(void 0,arguments),n=i(r,2),t=n[0],e=n[1],o=this.text(t,e),a=o.then(function(r){return ur(r,e.row)});return a.abort=function(){o.abort()},a},tsv:function(){var r=Sr.apply(void 0,arguments),n=i(r,2),t=n[0],e=n[1],o=this.text(t,e),a=o.then(function(r){return sr(r,e.row)});return a.abort=function(){o.abort()},a}});var Or=n("Semaphore"),Mr=function(){function r(n){e(this,r);var t=Or(this);t.capacity=n,t.available=n,t.queue=[]}return o(r,[{key:"wait",value:function(r){var n=Or(this),t=new function r(n,t){var o=this;e(this,r);var a=[new Promise(function(r,n){o.resolve=r,o.reject=n}),new Promise(function(r){o.permit=r}).then(function(){t(o.resolve,o.reject)})];this.promise=Promise.all(a).then(function(r){return n.signal(),r[0]},function(r){return n.signal(),Promise.reject(r)})}(this,r);return 0===n.available?n.queue.push(t):(--n.available,t.permit()),t.promise}},{key:"signal",value:function(){var r=Or(this);0===r.queue.length?++r.available:r.queue.shift().permit()}},{key:"capacity",get:function(){return Or(this).capacity}},{key:"available",get:function(){return Or(this).available}}]),r}();function Er(r){return r instanceof Int8Array||r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Int16Array||r instanceof Uint16Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array}function Cr(r,n,t){return r.slice(n,t)}function qr(r,n,t){return r.subarray(n,t)}var Tr={forEach:function(r,n,t){for(var e=Er(r)?qr:Cr,o=r.length-r.length%n,a=0,i=0;a<o;a+=n,++i)t(e(r,a,a+n),i)},some:function(r,n,t){for(var e=r.length-r.length%n,o=Er(r)?qr:Cr,a=0,i=0;a<e;a+=n,++i)if(t(o(r,a,a+n),i))return!0;return!1},every:function(r,n,t){for(var e=r.length-r.length%n,o=Er(r)?qr:Cr,a=0,i=0;a<e;a+=n,++i)if(!t(o(r,a,a+n),i))return!1;return!0},reduce:function(r,n,t,e){for(var o=e,a=r.length-r.length%n,i=Er(r)?qr:Cr,u=0,s=0;u<a;u+=n,++s)o=t(o,i(r,u,u+n),s);return o},set:function(r,n,t){var e=r.length-r.length%n;if(Er(r))for(var o=0;o<e;o+=n)r.set(t,o);else for(var a=0;a<e;a+=n)for(var i=0;i<n;++i)r[a+i]=t[i];return r},transform:function(r,n,t){var e=r.length-r.length%n;if(Er(r))for(var o=0,a=0;o<e;o+=n,++a){var i=t(r.slice(o,o+n),a);r.set(i,o)}else for(var u=0,s=0;u<e;u+=n,++s)for(var f=0;f<n;++f){var c=t(r.slice(u,u+n),s);r[u+f]=c[f]}return r}},kr={Aggregate:c,AggregateFunction:s,Array:l,AssertionError:p,FilePath:j,Global:A,Hash:X,ImplementationError:K,Math:Q,Namespace:n,Request:xr,Semaphore:Mr,Stride:Tr,URL:jr};r.Aggregate=c,r.AggregateFunction=s,r.Array=l,r.AssertionError=p,r.FilePath=j,r.Global=A,r.Hash=X,r.ImplementationError=K,r.Math=Q,r.Namespace=n,r.Request=xr,r.Semaphore=Mr,r.Stride=Tr,r.URL=jr,r.default=kr,r.isBrowser=g,r.isWorker=d,r.isNode=m,r.globalScope=b,Object.defineProperty(r,"__esModule",{value:!0})});