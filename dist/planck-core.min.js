!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(r.Planck=r.Planck||{})}(this,function(r){"use strict";function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=Symbol(r);return function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(r){return r};return void 0===r[t]&&(r[t]=e({})),r[t]}}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},n=function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function r(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=function(){return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,t){var e=[],n=!0,o=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(n=(a=u.next()).done)&&(e.push(a.value),!t||e.length!==t);n=!0);}catch(r){o=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return e}(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}return Array.from(r)},u=t("AggregateFunction"),s=function(){function r(t){if(n(this,r),t!==u)throw new Error;for(var e=u(this),o=arguments.length,i=Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];e.targets=i}return o(r,[{key:"apply",value:function(r,t,e){for(var n=u(this).targets,o=[],i=0;i<n.length;++i)o.push(n[i].apply(t,e));return o}}],[{key:"new",value:function(){for(var r=arguments.length,t=Array(r),e=0;e<r;e++)t[e]=arguments[e];var n=new(Function.prototype.bind.apply(this,[null].concat([u],t)));return new Proxy(function(){},n)}}]),r}(),f=t("Aggregate"),c=function(){function r(t){if(n(this,r),t!==f)throw new Error;for(var e=f(this),o=arguments.length,i=Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];e.targets=i}return o(r,[{key:"set",value:function(r,t,e,n){for(var o=f(this).targets,i=0;i<o.length;++i)o[i][t]=e;return r[t]=e,!0}},{key:"get",value:function(r,t,e){for(var n=f(this),o=n.targets,i=0;i<o.length;++i)if("function"!=typeof r[t])return n.targets[0][t];for(var a=[],u=0;u<o.length;++u){var c=o[u];a.push(c[t].bind(c))}return s.new.apply(s,a)}}],[{key:"new",value:function(){for(var r=arguments.length,t=Array(r),e=0;e<r;e++)t[e]=arguments[e];var n=new(Function.prototype.bind.apply(this,[null].concat([f],t)));return new Proxy({},n)}}]),r}();var l={min:function(r,t){var e=void 0,n=Number.POSITIVE_INFINITY;if("function"!=typeof t){for(var o=0;o<r.length;++o){var i=r[o];i<n&&(e=i,n=i)}return e}for(var a=0;a<r.length;++a){var u=r[a],s=t(u,a);s<n&&(e=u,n=s)}return e},max:function(r,t){var e=void 0,n=Number.NEGATIVE_INFINITY;if("function"!=typeof t){for(var o=0;o<r.length;++o){var i=r[o];i>n&&(e=i,n=i)}return e}for(var a=0;a<r.length;++a){var u=r[a],s=t(u,a);s>n&&(e=u,n=s)}return e}};function p(r){this.message=r}Object.setPrototypeOf(p,Error),p.prototype=Object.create(Error.prototype),p.prototype.name="AssertionError",p.prototype.message="",p.prototype.constructor=p;var h=function(){try{if(new Function("return this === window")())return!0}catch(r){}return!1}(),v=!h&&function(){try{if(new Function("return this === self")())return!0}catch(r){}return!1}(),y=!h&&!v&&function(){try{if(new Function("return this === global")())return!0}catch(r){}return!1}(),g=h?window:v?self:y?global:void 0,d={isBrowser:h,isWorker:v,isNode:y,scope:g};function b(r){var t=void 0,e=void 0;if("string"==typeof r)e=r,t=r;else{var n=Object.keys(r);t=r[e=i(n,1)[0]]}if(process.browser)return g[t];if(y)try{return require(e)}catch(r){}}function m(r){try{return b(r)}catch(r){g.process={browser:!y}}return b(r)}function w(r){var t=m(r);if(void 0===t){if(y)throw new Error('Could not resolve module "'+r+'"');return{}}return t}Object.assign(m,{optional:function(r){var t=m(r);return void 0===t?{}:t},required:function(r){var t=m(r);if(void 0===t)throw y?new Error('Could not resolve module "'+r+'"'):new Error('"'+r+'" isn’t defined in the global scope');return t},node:w,browser:function(r){var t=m(r);if(void 0===t){if(!y)throw new Error('"'+r+'" isn’t defined in the global scope');return{}}return t}});var A="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function j(r,t){return r(t={exports:{}},t.exports),t.exports}var x=j(function(r,t){function e(r,t){for(var e=0,n=r.length-1;n>=0;n--){var o=r[n];"."===o?r.splice(n,1):".."===o?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(r){return n.exec(r).slice(1)};function i(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}t.resolve=function(){for(var r="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var o=n>=0?arguments[n]:process.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(r=o+"/"+r,t="/"===o.charAt(0))}return r=e(i(r.split("/"),function(r){return!!r}),!t).join("/"),(t?"/":"")+r||"."},t.normalize=function(r){var n=t.isAbsolute(r),o="/"===a(r,-1);return(r=e(i(r.split("/"),function(r){return!!r}),!n).join("/"))||n||(r="."),r&&o&&(r+="/"),(n?"/":"")+r},t.isAbsolute=function(r){return"/"===r.charAt(0)},t.join=function(){var r=Array.prototype.slice.call(arguments,0);return t.normalize(i(r,function(r,t){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},t.relative=function(r,e){function n(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=t.resolve(r).substr(1),e=t.resolve(e).substr(1);for(var o=n(r.split("/")),i=n(e.split("/")),a=Math.min(o.length,i.length),u=a,s=0;s<a;s++)if(o[s]!==i[s]){u=s;break}var f=[];for(s=u;s<o.length;s++)f.push("..");return(f=f.concat(i.slice(u))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(r){var t=o(r),e=t[0],n=t[1];return e||n?(n&&(n=n.substr(0,n.length-1)),e+n):"."},t.basename=function(r,t){var e=o(r)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},t.extname=function(r){return o(r)[3]};var a="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return t<0&&(t=r.length+t),r.substr(t,e)}}),S=(x.resolve,x.normalize,x.isAbsolute,x.join,x.relative,x.sep,x.delimiter,x.dirname,x.basename,x.extname,w("path")),O={resolve:y?S.resolve:function(){for(var r=arguments.length,t=Array(r),e=0;e<r;e++)t[e]=arguments[e];return x.resolve.apply(x,["/"].concat(t))},normalize:y?S.normalize:x.normalize,join:y?S.join:x.join,relative:y?S.relative:x.relative,dirname:y?S.dirname:x.dirname,basename:y?S.basename:x.basename,extname:y?S.extname:x.extname,delimiter:y?S.delimiter:x.delimiter,sep:y?S.sep:x.sep},E=j(function(r){var t,e;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(r,t){return r<<t|r>>>32-t},rotr:function(r,t){return r<<32-t|r>>>t},endian:function(r){if(r.constructor==Number)return 16711935&e.rotl(r,8)|4278255360&e.rotl(r,24);for(var t=0;t<r.length;t++)r[t]=e.endian(r[t]);return r},randomBytes:function(r){for(var t=[];r>0;r--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(r){for(var t=[],e=0,n=0;e<r.length;e++,n+=8)t[n>>>5]|=r[e]<<24-n%32;return t},wordsToBytes:function(r){for(var t=[],e=0;e<32*r.length;e+=8)t.push(r[e>>>5]>>>24-e%32&255);return t},bytesToHex:function(r){for(var t=[],e=0;e<r.length;e++)t.push((r[e]>>>4).toString(16)),t.push((15&r[e]).toString(16));return t.join("")},hexToBytes:function(r){for(var t=[],e=0;e<r.length;e+=2)t.push(parseInt(r.substr(e,2),16));return t},bytesToBase64:function(r){for(var e=[],n=0;n<r.length;n+=3)for(var o=r[n]<<16|r[n+1]<<8|r[n+2],i=0;i<4;i++)8*n+6*i<=8*r.length?e.push(t.charAt(o>>>6*(3-i)&63)):e.push("=");return e.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],n=0,o=0;n<r.length;o=++n%4)0!=o&&e.push((t.indexOf(r.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(r.charAt(n))>>>6-2*o);return e}},r.exports=e}),C={utf8:{stringToBytes:function(r){return C.bin.stringToBytes(unescape(encodeURIComponent(r)))},bytesToString:function(r){return decodeURIComponent(escape(C.bin.bytesToString(r)))}},bin:{stringToBytes:function(r){for(var t=[],e=0;e<r.length;e++)t.push(255&r.charCodeAt(e));return t},bytesToString:function(r){for(var t=[],e=0;e<r.length;e++)t.push(String.fromCharCode(r[e]));return t.join("")}}},T=C,k=function(r){return null!=r&&(I(r)||"function"==typeof(t=r).readFloatLE&&"function"==typeof t.slice&&I(t.slice(0,0))||!!r._isBuffer);var t};function I(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}var N,q,P,B,F=j(function(r){var t,e,n,o,i;t=E,e=T.utf8,n=k,o=T.bin,(i=function r(i,a){i.constructor==String?i=a&&"binary"===a.encoding?o.stringToBytes(i):e.stringToBytes(i):n(i)?i=Array.prototype.slice.call(i,0):Array.isArray(i)||(i=i.toString());for(var u=t.bytesToWords(i),s=8*i.length,f=1732584193,c=-271733879,l=-1732584194,p=271733878,h=0;h<u.length;h++)u[h]=16711935&(u[h]<<8|u[h]>>>24)|4278255360&(u[h]<<24|u[h]>>>8);u[s>>>5]|=128<<s%32,u[14+(s+64>>>9<<4)]=s;var v=r._ff,y=r._gg,g=r._hh,d=r._ii;for(h=0;h<u.length;h+=16){var b=f,m=c,w=l,A=p;c=d(c=d(c=d(c=d(c=g(c=g(c=g(c=g(c=y(c=y(c=y(c=y(c=v(c=v(c=v(c=v(c,l=v(l,p=v(p,f=v(f,c,l,p,u[h+0],7,-680876936),c,l,u[h+1],12,-389564586),f,c,u[h+2],17,606105819),p,f,u[h+3],22,-1044525330),l=v(l,p=v(p,f=v(f,c,l,p,u[h+4],7,-176418897),c,l,u[h+5],12,1200080426),f,c,u[h+6],17,-1473231341),p,f,u[h+7],22,-45705983),l=v(l,p=v(p,f=v(f,c,l,p,u[h+8],7,1770035416),c,l,u[h+9],12,-1958414417),f,c,u[h+10],17,-42063),p,f,u[h+11],22,-1990404162),l=v(l,p=v(p,f=v(f,c,l,p,u[h+12],7,1804603682),c,l,u[h+13],12,-40341101),f,c,u[h+14],17,-1502002290),p,f,u[h+15],22,1236535329),l=y(l,p=y(p,f=y(f,c,l,p,u[h+1],5,-165796510),c,l,u[h+6],9,-1069501632),f,c,u[h+11],14,643717713),p,f,u[h+0],20,-373897302),l=y(l,p=y(p,f=y(f,c,l,p,u[h+5],5,-701558691),c,l,u[h+10],9,38016083),f,c,u[h+15],14,-660478335),p,f,u[h+4],20,-405537848),l=y(l,p=y(p,f=y(f,c,l,p,u[h+9],5,568446438),c,l,u[h+14],9,-1019803690),f,c,u[h+3],14,-187363961),p,f,u[h+8],20,1163531501),l=y(l,p=y(p,f=y(f,c,l,p,u[h+13],5,-1444681467),c,l,u[h+2],9,-51403784),f,c,u[h+7],14,1735328473),p,f,u[h+12],20,-1926607734),l=g(l,p=g(p,f=g(f,c,l,p,u[h+5],4,-378558),c,l,u[h+8],11,-2022574463),f,c,u[h+11],16,1839030562),p,f,u[h+14],23,-35309556),l=g(l,p=g(p,f=g(f,c,l,p,u[h+1],4,-1530992060),c,l,u[h+4],11,1272893353),f,c,u[h+7],16,-155497632),p,f,u[h+10],23,-1094730640),l=g(l,p=g(p,f=g(f,c,l,p,u[h+13],4,681279174),c,l,u[h+0],11,-358537222),f,c,u[h+3],16,-722521979),p,f,u[h+6],23,76029189),l=g(l,p=g(p,f=g(f,c,l,p,u[h+9],4,-640364487),c,l,u[h+12],11,-421815835),f,c,u[h+15],16,530742520),p,f,u[h+2],23,-995338651),l=d(l,p=d(p,f=d(f,c,l,p,u[h+0],6,-198630844),c,l,u[h+7],10,1126891415),f,c,u[h+14],15,-1416354905),p,f,u[h+5],21,-57434055),l=d(l,p=d(p,f=d(f,c,l,p,u[h+12],6,1700485571),c,l,u[h+3],10,-1894986606),f,c,u[h+10],15,-1051523),p,f,u[h+1],21,-2054922799),l=d(l,p=d(p,f=d(f,c,l,p,u[h+8],6,1873313359),c,l,u[h+15],10,-30611744),f,c,u[h+6],15,-1560198380),p,f,u[h+13],21,1309151649),l=d(l,p=d(p,f=d(f,c,l,p,u[h+4],6,-145523070),c,l,u[h+11],10,-1120210379),f,c,u[h+2],15,718787259),p,f,u[h+9],21,-343485551),f=f+b>>>0,c=c+m>>>0,l=l+w>>>0,p=p+A>>>0}return t.endian([f,c,l,p])})._ff=function(r,t,e,n,o,i,a){var u=r+(t&e|~t&n)+(o>>>0)+a;return(u<<i|u>>>32-i)+t},i._gg=function(r,t,e,n,o,i,a){var u=r+(t&n|e&~n)+(o>>>0)+a;return(u<<i|u>>>32-i)+t},i._hh=function(r,t,e,n,o,i,a){var u=r+(t^e^n)+(o>>>0)+a;return(u<<i|u>>>32-i)+t},i._ii=function(r,t,e,n,o,i,a){var u=r+(e^(t|~n))+(o>>>0)+a;return(u<<i|u>>>32-i)+t},i._blocksize=16,i._digestsize=16,r.exports=function(r,e){if(void 0===r||null===r)throw new Error("Illegal argument "+r);var n=t.wordsToBytes(i(r,e));return e&&e.asBytes?n:e&&e.asString?o.bytesToString(n):t.bytesToHex(n)}}),_={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},R=function(r){throw{name:"SyntaxError",message:r,at:N,text:P}},U=function(r){return r&&r!==q&&R("Expected '"+r+"' instead of '"+q+"'"),q=P.charAt(N),N+=1,q},z=function(){var r,t="";for("-"===q&&(t="-",U("-"));q>="0"&&q<="9";)t+=q,U();if("."===q)for(t+=".";U()&&q>="0"&&q<="9";)t+=q;if("e"===q||"E"===q)for(t+=q,U(),"-"!==q&&"+"!==q||(t+=q,U());q>="0"&&q<="9";)t+=q,U();if(r=+t,isFinite(r))return r;R("Bad number")},J=function(){var r,t,e,n="";if('"'===q)for(;U();){if('"'===q)return U(),n;if("\\"===q)if(U(),"u"===q){for(e=0,t=0;t<4&&(r=parseInt(U(),16),isFinite(r));t+=1)e=16*e+r;n+=String.fromCharCode(e)}else{if("string"!=typeof _[q])break;n+=_[q]}else n+=q}R("Bad string")},M=function(){for(;q&&q<=" ";)U()};B=function(){switch(M(),q){case"{":return function(){var r,t={};if("{"===q){if(U("{"),M(),"}"===q)return U("}"),t;for(;q;){if(r=J(),M(),U(":"),Object.hasOwnProperty.call(t,r)&&R('Duplicate key "'+r+'"'),t[r]=B(),M(),"}"===q)return U("}"),t;U(","),M()}}R("Bad object")}();case"[":return function(){var r=[];if("["===q){if(U("["),M(),"]"===q)return U("]"),r;for(;q;){if(r.push(B()),M(),"]"===q)return U("]"),r;U(","),M()}}R("Bad array")}();case'"':return J();case"-":return z();default:return q>="0"&&q<="9"?z():function(){switch(q){case"t":return U("t"),U("r"),U("u"),U("e"),!0;case"f":return U("f"),U("a"),U("l"),U("s"),U("e"),!1;case"n":return U("n"),U("u"),U("l"),U("l"),null}R("Unexpected '"+q+"'")}()}};var L,H,G,W=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,Z={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function V(r){return W.lastIndex=0,W.test(r)?'"'+r.replace(W,function(r){var t=Z[r];return"string"==typeof t?t:"\\u"+("0000"+r.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+r+'"'}var Y="undefined"!=typeof JSON?JSON:{parse:function(r,t){var n;return P=r,N=0,q=" ",n=B(),M(),q&&R("Syntax error"),"function"==typeof t?function r(n,o){var i,a,u=n[o];if(u&&"object"===(void 0===u?"undefined":e(u)))for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(void 0!==(a=r(u,i))?u[i]=a:delete u[i]);return t.call(n,o,u)}({"":n},""):n},stringify:function(r,t,n){var o;if(L="",H="","number"==typeof n)for(o=0;o<n;o+=1)H+=" ";else"string"==typeof n&&(H=n);if(G=t,t&&"function"!=typeof t&&("object"!==(void 0===t?"undefined":e(t))||"number"!=typeof t.length))throw new Error("JSON.stringify");return function r(t,n){var o,i,a,u,s,f=L,c=n[t];switch(c&&"object"===(void 0===c?"undefined":e(c))&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),"function"==typeof G&&(c=G.call(n,t,c)),void 0===c?"undefined":e(c)){case"string":return V(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(L+=H,s=[],"[object Array]"===Object.prototype.toString.apply(c)){for(u=c.length,o=0;o<u;o+=1)s[o]=r(o,c)||"null";return a=0===s.length?"[]":L?"[\n"+L+s.join(",\n"+L)+"\n"+f+"]":"["+s.join(",")+"]",L=f,a}if(G&&"object"===(void 0===G?"undefined":e(G)))for(u=G.length,o=0;o<u;o+=1)"string"==typeof(i=G[o])&&(a=r(i,c))&&s.push(V(i)+(L?": ":":")+a);else for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(a=r(i,c))&&s.push(V(i)+(L?": ":":")+a);return a=0===s.length?"{}":L?"{\n"+L+s.join(",\n"+L)+"\n"+f+"}":"{"+s.join(",")+"}",L=f,a}}("",{"":r})}},$=function(r,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n=t.space||"";"number"==typeof n&&(n=Array(n+1).join(" "));var o,i="boolean"==typeof t.cycles&&t.cycles,a=t.replacer||function(r,t){return t},u=t.cmp&&(o=t.cmp,function(r){return function(t,e){var n={key:t,value:r[t]},i={key:e,value:r[e]};return o(n,i)}}),s=[];return function r(t,o,f,c){var l=n?"\n"+new Array(c+1).join(n):"",p=n?": ":":";if(f&&f.toJSON&&"function"==typeof f.toJSON&&(f=f.toJSON()),void 0!==(f=a.call(t,o,f))){if("object"!==(void 0===f?"undefined":e(f))||null===f)return Y.stringify(f);if(D(f)){for(var h=[],v=0;v<f.length;v++){var y=r(f,v,f[v],c+1)||Y.stringify(null);h.push(l+n+y)}return"["+h.join(",")+l+"]"}if(-1!==s.indexOf(f)){if(i)return Y.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}s.push(f);var g=X(f).sort(u&&u(f));for(h=[],v=0;v<g.length;v++){var d=r(f,o=g[v],f[o],c+1);if(d){var b=Y.stringify(o)+p+d;h.push(l+n+b)}}return s.splice(s.indexOf(f),1),"{"+h.join(",")+l+"}"}}({"":r},"",r,0)},D=Array.isArray||function(r){return"[object Array]"==={}.toString.call(r)},X=Object.keys||function(r){var t=Object.prototype.hasOwnProperty||function(){return!0},e=[];for(var n in r)t.call(r,n)&&e.push(n);return e};function K(r){return F($(r))}function Q(r){this.message=r}function rr(r,t,e){return r+(t-r)*e}function tr(r,t,e){return r<t?t:r>e?e:r}Object.setPrototypeOf(Q,Error),Q.prototype=Object.create(Error.prototype),Q.prototype.name="ImplementationError",Q.prototype.message="",Q.prototype.constructor=Q;var er=Math.PI/180,nr=180/Math.PI;var or={lerp:rr,constrain:tr,map:function(r,t,e,n,o){return n+(r-t)/(e-t)*(o-n)},wrap:function(r,t,e){return r<t?e-(t-r)%(e-t):t+(r-t)%(e-t)},radians:function(r){return r*er},degrees:function(r){return r*nr},fract:function(r){return r-Math.floor(r)},mod:function(r,t){return r-t*Math.floor(r/t)},clamp:tr,mix:rr,step:function(r,t){return t<r?0:1},smoothstep:function(r,t,e){var n=tr((e-r)/(t-r),0,1);return n*n*(3-2*n)}},ir={},ar={},ur=34,sr=10,fr=13;function cr(r){return new Function("d","return {"+r.map(function(r,t){return JSON.stringify(r)+": d["+t+"]"}).join(",")+"}")}function lr(r){var t=new RegExp('["'+r+"\n\r]"),e=r.charCodeAt(0);function n(r,t){var n,o=[],i=r.length,a=0,u=0,s=i<=0,f=!1;function c(){if(s)return ar;if(f)return f=!1,ir;var t,n,o=a;if(r.charCodeAt(o)===ur){for(;a++<i&&r.charCodeAt(a)!==ur||r.charCodeAt(++a)===ur;);return(t=a)>=i?s=!0:(n=r.charCodeAt(a++))===sr?f=!0:n===fr&&(f=!0,r.charCodeAt(a)===sr&&++a),r.slice(o+1,t-1).replace(/""/g,'"')}for(;a<i;){if((n=r.charCodeAt(t=a++))===sr)f=!0;else if(n===fr)f=!0,r.charCodeAt(a)===sr&&++a;else if(n!==e)continue;return r.slice(o,t)}return s=!0,r.slice(o,i)}for(r.charCodeAt(i-1)===sr&&--i,r.charCodeAt(i-1)===fr&&--i;(n=c())!==ar;){for(var l=[];n!==ir&&n!==ar;)l.push(n),n=c();t&&null==(l=t(l,u++))||o.push(l)}return o}function o(t){return t.map(i).join(r)}function i(r){return null==r?"":t.test(r+="")?'"'+r.replace(/"/g,'""')+'"':r}return{parse:function(r,t){var e,o,i=n(r,function(r,n){if(e)return e(r,n-1);var i,a,u;o=r,e=t?(a=t,u=cr(i=r),function(r,t){return a(u(r),t,i)}):cr(r)});return i.columns=o||[],i},parseRows:n,format:function(t,e){var n,o,a;return null==e&&(n=t,o=Object.create(null),a=[],n.forEach(function(r){for(var t in r)t in o||a.push(o[t]=t)}),e=a),[e.map(i).join(r)].concat(t.map(function(t){return e.map(function(r){return i(t[r])}).join(r)})).join("\n")},formatRows:function(r){return r.map(o).join("\n")}}}var pr=lr(",").parse,hr=lr("\t").parse,vr=function(r,t){if(t=t.split(":")[0],!(r=+r))return!1;switch(t){case"http":case"ws":return 80!==r;case"https":case"wss":return 443!==r;case"ftp":return 21!==r;case"gopher":return 70!==r;case"file":return!1}return 0!==r},yr=Object.prototype.hasOwnProperty;function gr(r){return decodeURIComponent(r.replace(/\+/g," "))}var dr={stringify:function(r,t){t=t||"";var e=[];for(var n in"string"!=typeof t&&(t="?"),r)yr.call(r,n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(r[n]));return e.length?t+e.join("&"):""},parse:function(r){for(var t,e=/([^=?&]+)=?([^&]*)/g,n={};t=e.exec(r);n[gr(t[1])]=gr(t[2]));return n}},br=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,mr=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,wr=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Ar={hash:1,query:1};function jr(r){var t,n={},o=void 0===(r=r||A.location||{})?"undefined":e(r);if("blob:"===r.protocol)n=new Sr(unescape(r.pathname),{});else if("string"===o)for(t in n=new Sr(r,{}),Ar)delete n[t];else if("object"===o){for(t in r)t in Ar||(n[t]=r[t]);void 0===n.slashes&&(n.slashes=mr.test(r.href))}return n}function xr(r){var t=br.exec(r);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function Sr(r,t,n){if(!(this instanceof Sr))return new Sr(r,t,n);var o,i,a,u,s,f,c=wr.slice(),l=void 0===t?"undefined":e(t),p=this,h=0;for("object"!==l&&"string"!==l&&(n=t,t=null),n&&"function"!=typeof n&&(n=dr.parse),t=jr(t),o=!(i=xr(r||"")).protocol&&!i.slashes,p.slashes=i.slashes||o&&t.slashes,p.protocol=i.protocol||t.protocol||"",r=i.rest,i.slashes||(c[2]=[/(.*)/,"pathname"]);h<c.length;h++)a=(u=c[h])[0],f=u[1],a!=a?p[f]=r:"string"==typeof a?~(s=r.indexOf(a))&&("number"==typeof u[2]?(p[f]=r.slice(0,s),r=r.slice(s+u[2])):(p[f]=r.slice(s),r=r.slice(0,s))):(s=a.exec(r))&&(p[f]=s[1],r=r.slice(0,s.index)),p[f]=p[f]||o&&u[3]&&t[f]||"",u[4]&&(p[f]=p[f].toLowerCase());n&&(p.query=n(p.query)),o&&t.slashes&&"/"!==p.pathname.charAt(0)&&(""!==p.pathname||""!==t.pathname)&&(p.pathname=function(r,t){for(var e=(t||"/").split("/").slice(0,-1).concat(r.split("/")),n=e.length,o=e[n-1],i=!1,a=0;n--;)"."===e[n]?e.splice(n,1):".."===e[n]?(e.splice(n,1),a++):a&&(0===n&&(i=!0),e.splice(n,1),a--);return i&&e.unshift(""),"."!==o&&".."!==o||e.push(""),e.join("/")}(p.pathname,t.pathname)),vr(p.port,p.protocol)||(p.host=p.hostname,p.port=""),p.username=p.password="",p.auth&&(u=p.auth.split(":"),p.username=u[0]||"",p.password=u[1]||""),p.origin=p.protocol&&p.host&&"file:"!==p.protocol?p.protocol+"//"+p.host:"null",p.href=p.toString()}Sr.prototype={set:function(r,t,e){var n=this;switch(r){case"query":"string"==typeof t&&t.length&&(t=(e||dr.parse)(t)),n[r]=t;break;case"port":n[r]=t,vr(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[r]="");break;case"hostname":n[r]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[r]=t,/:\d+$/.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!e;break;case"pathname":case"hash":if(t){var o="pathname"===r?"/":"#";n[r]=t.charAt(0)!==o?o+t:t}else n[r]=t;break;default:n[r]=t}for(var i=0;i<wr.length;i++){var a=wr[i];a[4]&&(n[a[1]]=n[a[1]].toLowerCase())}return n.origin=n.protocol&&n.host&&"file:"!==n.protocol?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},toString:function(r){r&&"function"==typeof r||(r=dr.stringify);var t,n=this,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var i=o+(n.slashes?"//":"");return n.username&&(i+=n.username,n.password&&(i+=":"+n.password),i+="@"),i+=n.host+n.pathname,(t="object"===e(n.query)?r(n.query):n.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(i+=n.hash),i}},Sr.extractProtocol=xr,Sr.location=jr,Sr.qs=dr;var Or=Sr,Er=w("fs").readFile,Cr=w("request");function Tr(r,t){if(y){var e=function(r,t){var e=void 0,n=void 0,o=new Promise(function(){for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];e=t[0],n=t[1]});if(t.local)Er(r,t.encoding,function(r,t){r?n(r):e(t)}),o.abort=function(){};else{var i=Cr({url:r,headers:t.headers||{},qs:t.query||{},encoding:t.encoding},function(r,t){r?n(r):((t.statusCode<200||t.statusCode>=300)&&n(t.statusCode),e(t.body))});i.on("abort",function(){n(0)}),o.abort=function(){i.abort()}}return o}(r,t);if("json"===t.type){var n=e.then(function(r){if("string"!=typeof r)throw new Error("Response is unexpectedly not a string");return JSON.parse(r)});return n.abort=function(){e.abort()},n}if("arraybuffer"===t.type){var o=e.then(function(r){if(!(r instanceof Buffer))throw new Error("Response is unexpectedly not a buffer");for(var t=new ArrayBuffer(r.length),e=new Uint8Array(t),n=0;n<r.length;++n)e[n]=r[n];return t});return o.abort=function(){e.abort()},o}return e}return function(r,t){var e=void 0,n=void 0,o=new Promise(function(){for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];e=t[0],n=t[1]}),i=new Or(r,!0);t.query&&i.set("query",Object.assign({},i.query,t.query));var u=new XMLHttpRequest;if(u.open("get",i.toString(),!0),t.headers)for(var s=Object.keys(t.headers),f=0;f<s.length;++f)u.setRequestHeader.apply(u,a(t.headers[s[f]]));return u.responseType=t.type,u.addEventListener("loadend",function(r){u.status<200||u.status>=300?n(u.status):null!==u.response||"json"!==t.type?e(u.response):n(new Error("Could not parse JSON"))},!1),u.send(),o.abort=function(){u.abort()},o}(r,t)}function kr(){for(var r=arguments.length,t=Array(r),e=0;e<r;e++)t[e]=arguments[e];var n=t[0],o=t[1];"string"!=typeof n&&(n=(o=n).url);if("string"!=typeof n)throw new Error("The first argument or options.url must be a string");return[n,o=Object.assign({},{type:"text",local:!1,encoding:"utf-8"},o)]}Object.assign(Tr,{text:function(){var r=kr.apply(void 0,arguments),t=i(r,2),e=t[0],n=t[1];return n.type="text",Tr(e,n)},json:function(){var r=kr.apply(void 0,arguments),t=i(r,2),e=t[0],n=t[1];return n.type="json",Tr(e,n)},buffer:function(){var r=kr.apply(void 0,arguments),t=i(r,2),e=t[0],n=t[1];return n.type="arraybuffer",n.encoding=null,Tr(e,n)},csv:function(){var r=kr.apply(void 0,arguments),t=i(r,2),e=t[0],n=t[1],o=this.text(e,n),a=o.then(function(r){return pr(r,n.row)});return a.abort=function(){o.abort()},a},tsv:function(){var r=kr.apply(void 0,arguments),t=i(r,2),e=t[0],n=t[1],o=this.text(e,n),a=o.then(function(r){return hr(r,n.row)});return a.abort=function(){o.abort()},a}});var Ir=t("Semaphore"),Nr=function(){function r(t){n(this,r);var e=Ir(this);e.capacity=t,e.available=t,e.queue=[]}return o(r,[{key:"wait",value:function(r){var t=Ir(this),e=new function r(t,e){var o=this;n(this,r);var i=[new Promise(function(r,t){o.resolve=r,o.reject=t}),new Promise(function(r){o.let=r}).then(function(){e(o.resolve,o.reject)})];this.promise=Promise.all(i).then(function(r){return t.signal(),r[0]},function(r){return t.signal(),Promise.reject(r)})}(this,r);return 0===t.available?t.queue.push(e):(--t.available,e.let()),e.promise}},{key:"signal",value:function(){var r=Ir(this);0===r.queue.length?++r.available:r.queue.shift().let()}},{key:"capacity",get:function(){return Ir(this).capacity}},{key:"available",get:function(){return Ir(this).available}}]),r}();function qr(r){return r instanceof Int8Array||r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Int16Array||r instanceof Uint16Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array}function Pr(r,t,e){return r.slice(t,e)}function Br(r,t,e){return r.subarray(t,e)}var Fr={forEach:function(r,t,e){for(var n=qr(r)?Br:Pr,o=r.length-r.length%t,i=0,a=0;i<o;i+=t,++a)e(n(r,i,i+t),a)},some:function(r,t,e){for(var n=r.length-r.length%t,o=qr(r)?Br:Pr,i=0,a=0;i<n;i+=t,++a)if(e(o(r,i,i+t),a))return!0;return!1},every:function(r,t,e){for(var n=r.length-r.length%t,o=qr(r)?Br:Pr,i=0,a=0;i<n;i+=t,++a)if(!e(o(r,i,i+t),a))return!1;return!0},reduce:function(r,t,e,n){for(var o=n,i=r.length-r.length%t,a=qr(r)?Br:Pr,u=0,s=0;u<i;u+=t,++s)o=e(o,a(r,u,u+t),s);return o},set:function(r,t,e){var n=r.length-r.length%t;if(qr(r))for(var o=0;o<n;o+=t)r.set(e,o);else for(var i=0;i<n;i+=t)for(var a=0;a<t;++a)r[i+a]=e[a];return r},transform:function(r,t,e){var n=r.length-r.length%t;if(qr(r))for(var o=0,i=0;o<n;o+=t,++i){var a=e(r.slice(o,o+t),i);r.set(a,o)}else for(var u=0,s=0;u<n;u+=t,++s)for(var f=0;f<t;++f){var c=e(r.slice(u,u+t),s);r[u+f]=c[f]}return r}},_r={Aggregate:c,AggregateFunction:s,Array:l,AssertionError:p,External:m,FilePath:O,Global:d,Hash:K,ImplementationError:Q,Math:or,Namespace:t,Request:Tr,Semaphore:Nr,Stride:Fr,URL:Or};r.Aggregate=c,r.AggregateFunction=s,r.Array=l,r.AssertionError=p,r.External=m,r.FilePath=O,r.Global=d,r.Hash=K,r.ImplementationError=Q,r.Math=or,r.Namespace=t,r.Request=Tr,r.Semaphore=Nr,r.Stride=Fr,r.URL=Or,r.default=_r,Object.defineProperty(r,"__esModule",{value:!0})});