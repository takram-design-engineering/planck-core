!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Planck={})}(this,function(e){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=Symbol(e);return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return void 0===e[t]&&(e[t]=r({})),e[t]}}function r(e){this.message=e}function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}function o(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&o(e.slice(0,0))}function u(e){return ee.lastIndex=0,ee.test(e)?'"'+e.replace(ee,function(e){var t=te[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function a(e,t){var r,n,o,i,c,s=Q,f=t[e];switch(f&&"object"===(void 0===f?"undefined":b(f))&&"function"==typeof f.toJSON&&(f=f.toJSON(e)),"function"==typeof $&&(f=$.call(t,e,f)),void 0===f?"undefined":b(f)){case"string":return u(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(Q+=Y,c=[],"[object Array]"===Object.prototype.toString.apply(f)){for(i=f.length,r=0;r<i;r+=1)c[r]=a(r,f)||"null";return o=0===c.length?"[]":Q?"[\n"+Q+c.join(",\n"+Q)+"\n"+s+"]":"["+c.join(",")+"]",Q=s,o}if($&&"object"===(void 0===$?"undefined":b($)))for(i=$.length,r=0;r<i;r+=1)"string"==typeof(n=$[r])&&(o=a(n,f))&&c.push(u(n)+(Q?": ":":")+o);else for(n in f)Object.prototype.hasOwnProperty.call(f,n)&&(o=a(n,f))&&c.push(u(n)+(Q?": ":":")+o);return o=0===c.length?"{}":Q?"{\n"+Q+c.join(",\n"+Q)+"\n"+s+"}":"{"+c.join(",")+"}",Q=s,o}}function c(e){this.message=e}function s(e){return decodeURIComponent(e.replace(/\+/g," "))}function f(e){var t,r={},n=void 0===(e=e||M.location||{})?"undefined":b(e);if("blob:"===e.protocol)r=new h(unescape(e.pathname),{});else if("string"===n){r=new h(e,{});for(t in ve)delete r[t]}else if("object"===n){for(t in e)t in ve||(r[t]=e[t]);void 0===r.slashes&&(r.slashes=he.test(e.href))}return r}function l(e){var t=pe.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function p(e,t){for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],i=!1,u=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),u++):u&&(0===n&&(i=!0),r.splice(n,1),u--);return i&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}function h(e,t,r){if(!(this instanceof h))return new h(e,t,r);var n,o,i,u,a,c,s=ye.slice(),y=void 0===t?"undefined":b(t),v=this,d=0;for("object"!==y&&"string"!==y&&(r=t,t=null),r&&"function"!=typeof r&&(r=le.parse),t=f(t),n=!(o=l(e||"")).protocol&&!o.slashes,v.slashes=o.slashes||n&&t.slashes,v.protocol=o.protocol||t.protocol||"",e=o.rest,o.slashes||(s[2]=[/(.*)/,"pathname"]);d<s.length;d++)i=(u=s[d])[0],c=u[1],i!==i?v[c]=e:"string"==typeof i?~(a=e.indexOf(i))&&("number"==typeof u[2]?(v[c]=e.slice(0,a),e=e.slice(a+u[2])):(v[c]=e.slice(a),e=e.slice(0,a))):(a=i.exec(e))&&(v[c]=a[1],e=e.slice(0,a.index)),v[c]=v[c]||(n&&u[3]?t[c]||"":""),u[4]&&(v[c]=v[c].toLowerCase());r&&(v.query=r(v.query)),n&&t.slashes&&"/"!==v.pathname.charAt(0)&&(""!==v.pathname||""!==t.pathname)&&(v.pathname=p(v.pathname,t.pathname)),se(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(u=v.auth.split(":"),v.username=u[0]||"",v.password=u[1]||""),v.origin=v.protocol&&v.host&&"file:"!==v.protocol?v.protocol+"//"+v.host:"null",v.href=v.toString()}function y(e,t){return new Promise(function(r,n){var o=new ge(e,!0);t.query&&o.set("query",Object.assign({},o.query,t.query));var i=new XMLHttpRequest;i.open("get",o.toString(),!0),t.headers&&Object.entries(t.headers).forEach(function(e){i.setRequestHeader.apply(i,x(e))}),i.responseType=t.type,i.addEventListener("loadend",function(e){i.status<200||i.status>=300?n(i.status):null!==i.response||"json"!==t.type?r(i.response):n(new Error("Could not parse JSON"))},!1),i.send()})}function v(e,t){return t.local?new Promise(function(r,n){be(e,t.encoding,function(e,t){e?n(e):r(t)})}):new Promise(function(r,n){we({url:e,headers:t.headers||{},qs:t.query||{},encoding:t.encoding},function(e,t){e?n(e):((t.statusCode<200||t.statusCode>=300)&&n(t.statusCode),r(t.body))})})}function d(e,t){if("node"===q.type){var r=v(e,t);return"json"===t.type?r.then(function(e){if("string"!=typeof e)throw new Error("Response is unexpectedly not a string");return JSON.parse(e)}):"arraybuffer"===t.type?r.then(function(e){if(!(e instanceof Buffer))throw new Error("Response is unexpectedly not a buffer");for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;++n)r[n]=e[n];return t}):r}return y(e,t)}function g(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[1];if("string"!=typeof n&&(n=(o=n).url),"string"!=typeof n)throw new Error("The first argument or options.url must be a string");return o=Object.assign({},{type:"text",local:!1,encoding:"utf-8"},o),[n,o]}var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),k=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},j=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},A=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},O=t("AggregateFunction"),S=function(){function e(t){if(w(this,e),t!==O)throw new Error;for(var r=O(this),n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];r.targets=o}return m(e,[{key:"apply",value:function(e,t,r){return O(this).targets.map(function(e){return Reflect.apply(e,t,r)})}},{key:"getPrototypeOf",value:function(e){return this.constructor.prototype}}],[{key:"new",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=new(Function.prototype.bind.apply(this,[null].concat([O],t)));return new Proxy(function(){},n)}}]),e}(),E=t("Aggregate"),T=function(){function e(t){if(w(this,e),t!==E)throw new Error;for(var r=E(this),n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];r.targets=o}return m(e,[{key:"set",value:function(e,t,r,n){return E(this).targets.forEach(function(e){Reflect.set(e,t,r)}),Reflect.set(e,t,r,n)}},{key:"get",value:function(e,t,r){var n=E(this);return n.targets.every(function(e){return"function"==typeof Reflect.get(e,t)})?S.new.apply(S,x(n.targets.map(function(e){return Reflect.get(e,t).bind(e)}))):Reflect.get(n.targets[0],t,r)}},{key:"getPrototypeOf",value:function(e){return this.constructor.prototype}}],[{key:"new",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=new(Function.prototype.bind.apply(this,[null].concat([E],t)));return new Proxy({},n)}}]),e}();Object.setPrototypeOf(r,Error),(r.prototype=Object.create(Error.prototype)).name="AssertionError",r.prototype.message="",r.prototype.constructor=r;var q=function(){function e(){w(this,e)}return m(e,null,[{key:"type",get:function(){try{if(new Function("return this === window")())return"browser"}catch(e){}try{if(new Function("return this === self")())return"worker"}catch(e){}try{if(new Function("return this === global")())return"node"}catch(e){}throw new Error}},{key:"self",get:function(){switch(this.type){case"browser":return window;case"worker":return self;case"node":return global}throw new Error}}]),e}(),P=t("FilePath"),C=function(){function e(){w(this,e)}return m(e,null,[{key:"self",get:function(){return P(this).self}},{key:"current",get:function(){switch(q.type){case"browser":return window.location.href;case"worker":return self.location.href;case"node":return process.cwd()}throw new Error}}]),e}();P(C).self=C.current;var B,_,R,N,M="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},F=n(function(e){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var o=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?r.push(t.charAt(o>>>6*(3-i)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,o=0;n<e.length;o=++n%4)0!=o&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(e.charAt(n))>>>6-2*o);return r}};e.exports=r}()}),U={utf8:{stringToBytes:function(e){return U.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(U.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}},I=U,J=function(e){return null!=e&&(o(e)||i(e)||!!e._isBuffer)},D=n(function(e){!function(){var t=F,r=I.utf8,n=J,o=I.bin,i=function e(i,u){i.constructor==String?i=u&&"binary"===u.encoding?o.stringToBytes(i):r.stringToBytes(i):n(i)?i=Array.prototype.slice.call(i,0):Array.isArray(i)||(i=i.toString());for(var a=t.bytesToWords(i),c=8*i.length,s=1732584193,f=-271733879,l=-1732584194,p=271733878,h=0;h<a.length;h++)a[h]=16711935&(a[h]<<8|a[h]>>>24)|4278255360&(a[h]<<24|a[h]>>>8);a[c>>>5]|=128<<c%32,a[14+(c+64>>>9<<4)]=c;for(var y=e._ff,v=e._gg,d=e._hh,g=e._ii,h=0;h<a.length;h+=16){var b=s,w=f,m=l,k=p;f=g(f=g(f=g(f=g(f=d(f=d(f=d(f=d(f=v(f=v(f=v(f=v(f=y(f=y(f=y(f=y(f,l=y(l,p=y(p,s=y(s,f,l,p,a[h+0],7,-680876936),f,l,a[h+1],12,-389564586),s,f,a[h+2],17,606105819),p,s,a[h+3],22,-1044525330),l=y(l,p=y(p,s=y(s,f,l,p,a[h+4],7,-176418897),f,l,a[h+5],12,1200080426),s,f,a[h+6],17,-1473231341),p,s,a[h+7],22,-45705983),l=y(l,p=y(p,s=y(s,f,l,p,a[h+8],7,1770035416),f,l,a[h+9],12,-1958414417),s,f,a[h+10],17,-42063),p,s,a[h+11],22,-1990404162),l=y(l,p=y(p,s=y(s,f,l,p,a[h+12],7,1804603682),f,l,a[h+13],12,-40341101),s,f,a[h+14],17,-1502002290),p,s,a[h+15],22,1236535329),l=v(l,p=v(p,s=v(s,f,l,p,a[h+1],5,-165796510),f,l,a[h+6],9,-1069501632),s,f,a[h+11],14,643717713),p,s,a[h+0],20,-373897302),l=v(l,p=v(p,s=v(s,f,l,p,a[h+5],5,-701558691),f,l,a[h+10],9,38016083),s,f,a[h+15],14,-660478335),p,s,a[h+4],20,-405537848),l=v(l,p=v(p,s=v(s,f,l,p,a[h+9],5,568446438),f,l,a[h+14],9,-1019803690),s,f,a[h+3],14,-187363961),p,s,a[h+8],20,1163531501),l=v(l,p=v(p,s=v(s,f,l,p,a[h+13],5,-1444681467),f,l,a[h+2],9,-51403784),s,f,a[h+7],14,1735328473),p,s,a[h+12],20,-1926607734),l=d(l,p=d(p,s=d(s,f,l,p,a[h+5],4,-378558),f,l,a[h+8],11,-2022574463),s,f,a[h+11],16,1839030562),p,s,a[h+14],23,-35309556),l=d(l,p=d(p,s=d(s,f,l,p,a[h+1],4,-1530992060),f,l,a[h+4],11,1272893353),s,f,a[h+7],16,-155497632),p,s,a[h+10],23,-1094730640),l=d(l,p=d(p,s=d(s,f,l,p,a[h+13],4,681279174),f,l,a[h+0],11,-358537222),s,f,a[h+3],16,-722521979),p,s,a[h+6],23,76029189),l=d(l,p=d(p,s=d(s,f,l,p,a[h+9],4,-640364487),f,l,a[h+12],11,-421815835),s,f,a[h+15],16,530742520),p,s,a[h+2],23,-995338651),l=g(l,p=g(p,s=g(s,f,l,p,a[h+0],6,-198630844),f,l,a[h+7],10,1126891415),s,f,a[h+14],15,-1416354905),p,s,a[h+5],21,-57434055),l=g(l,p=g(p,s=g(s,f,l,p,a[h+12],6,1700485571),f,l,a[h+3],10,-1894986606),s,f,a[h+10],15,-1051523),p,s,a[h+1],21,-2054922799),l=g(l,p=g(p,s=g(s,f,l,p,a[h+8],6,1873313359),f,l,a[h+15],10,-30611744),s,f,a[h+6],15,-1560198380),p,s,a[h+13],21,1309151649),l=g(l,p=g(p,s=g(s,f,l,p,a[h+4],6,-145523070),f,l,a[h+11],10,-1120210379),s,f,a[h+2],15,718787259),p,s,a[h+9],21,-343485551),s=s+b>>>0,f=f+w>>>0,l=l+m>>>0,p=p+k>>>0}return t.endian([s,f,l,p])};i._ff=function(e,t,r,n,o,i,u){var a=e+(t&r|~t&n)+(o>>>0)+u;return(a<<i|a>>>32-i)+t},i._gg=function(e,t,r,n,o,i,u){var a=e+(t&n|r&~n)+(o>>>0)+u;return(a<<i|a>>>32-i)+t},i._hh=function(e,t,r,n,o,i,u){var a=e+(t^r^n)+(o>>>0)+u;return(a<<i|a>>>32-i)+t},i._ii=function(e,t,r,n,o,i,u){var a=e+(r^(t|~n))+(o>>>0)+u;return(a<<i|a>>>32-i)+t},i._blocksize=16,i._digestsize=16,e.exports=function(e,r){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var n=t.wordsToBytes(i(e,r));return r&&r.asBytes?n:r&&r.asString?o.bytesToString(n):t.bytesToHex(n)}}()}),L={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},z=function(e){throw{name:"SyntaxError",message:e,at:B,text:R}},H=function(e){return e&&e!==_&&z("Expected '"+e+"' instead of '"+_+"'"),_=R.charAt(B),B+=1,_},K=function(){var e,t="";for("-"===_&&(t="-",H("-"));_>="0"&&_<="9";)t+=_,H();if("."===_)for(t+=".";H()&&_>="0"&&_<="9";)t+=_;if("e"===_||"E"===_)for(t+=_,H(),"-"!==_&&"+"!==_||(t+=_,H());_>="0"&&_<="9";)t+=_,H();if(e=+t,isFinite(e))return e;z("Bad number")},V=function(){var e,t,r,n="";if('"'===_)for(;H();){if('"'===_)return H(),n;if("\\"===_)if(H(),"u"===_){for(r=0,t=0;t<4&&(e=parseInt(H(),16),isFinite(e));t+=1)r=16*r+e;n+=String.fromCharCode(r)}else{if("string"!=typeof L[_])break;n+=L[_]}else n+=_}z("Bad string")},Z=function(){for(;_&&_<=" ";)H()},G=function(){switch(_){case"t":return H("t"),H("r"),H("u"),H("e"),!0;case"f":return H("f"),H("a"),H("l"),H("s"),H("e"),!1;case"n":return H("n"),H("u"),H("l"),H("l"),null}z("Unexpected '"+_+"'")},W=function(){var e=[];if("["===_){if(H("["),Z(),"]"===_)return H("]"),e;for(;_;){if(e.push(N()),Z(),"]"===_)return H("]"),e;H(","),Z()}}z("Bad array")},X=function(){var e,t={};if("{"===_){if(H("{"),Z(),"}"===_)return H("}"),t;for(;_;){if(e=V(),Z(),H(":"),Object.hasOwnProperty.call(t,e)&&z('Duplicate key "'+e+'"'),t[e]=N(),Z(),"}"===_)return H("}"),t;H(","),Z()}}z("Bad object")};N=function(){switch(Z(),_){case"{":return X();case"[":return W();case'"':return V();case"-":return K();default:return _>="0"&&_<="9"?K():G()}};var Q,Y,$,ee=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,te={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},re={parse:function(e,t){var r;return R=e,B=0,_=" ",r=N(),Z(),_&&z("Syntax error"),"function"==typeof t?function e(r,n){var o,i,u=r[n];if(u&&"object"===(void 0===u?"undefined":b(u)))for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(void 0!==(i=e(u,o))?u[o]=i:delete u[o]);return t.call(r,n,u)}({"":r},""):r},stringify:function(e,t,r){var n;if(Q="",Y="","number"==typeof r)for(n=0;n<r;n+=1)Y+=" ";else"string"==typeof r&&(Y=r);if($=t,t&&"function"!=typeof t&&("object"!==(void 0===t?"undefined":b(t))||"number"!=typeof t.length))throw new Error("JSON.stringify");return a("",{"":e})}},ne="undefined"!=typeof JSON?JSON:re,oe=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r=t.space||"";"number"==typeof r&&(r=Array(r+1).join(" "));var n="boolean"==typeof t.cycles&&t.cycles,o=t.replacer||function(e,t){return t},i=t.cmp&&function(e){return function(t){return function(r,n){var o={key:r,value:t[r]},i={key:n,value:t[n]};return e(o,i)}}}(t.cmp),u=[];return function e(t,a,c,s){var f=r?"\n"+new Array(s+1).join(r):"",l=r?": ":":";if(c&&c.toJSON&&"function"==typeof c.toJSON&&(c=c.toJSON()),void 0!==(c=o.call(t,a,c))){if("object"!==(void 0===c?"undefined":b(c))||null===c)return ne.stringify(c);if(ie(c)){for(var p=[],h=0;h<c.length;h++){var y=e(c,h,c[h],s+1)||ne.stringify(null);p.push(f+r+y)}return"["+p.join(",")+f+"]"}if(-1!==u.indexOf(c)){if(n)return ne.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}u.push(c);for(var v=ue(c).sort(i&&i(c)),p=[],h=0;h<v.length;h++){var d=e(c,a=v[h],c[a],s+1);if(d){var g=ne.stringify(a)+l+d;p.push(f+r+g)}}return u.splice(u.indexOf(c),1),"{"+p.join(",")+f+"}"}}({"":e},"",e,0)},ie=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},ue=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var n in e)t.call(e,n)&&r.push(n);return r};Object.setPrototypeOf(c,Error),(c.prototype=Object.create(Error.prototype)).name="ImplementationError",c.prototype.message="",c.prototype.constructor=c;var ae=t("Multiton"),ce=function(){function e(t){if(w(this,e),this.constructor.has(t))throw new Error('Attempt to create multiple instances for key "'+t+'"')}return m(e,null,[{key:"has",value:function(e){var t=ae(this);if(void 0===t.instances)return!1;var r=this.coerceMultitonKey(e);return void 0!==t.instances[r]}},{key:"for",value:function(e){var t=ae(this);t.instances||(t.instances=new Map);var r=this.coerceMultitonKey(e);if(t.instances.has(r))return t.instances.get(r);for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];var u=new(Function.prototype.bind.apply(this,[null].concat([r],o)));return t.instances.set(r,u),u}},{key:"coerceMultitonKey",value:function(e){return e}}]),e}(),se=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e},fe=Object.prototype.hasOwnProperty,le={stringify:function(e,t){var r=[];"string"!=typeof(t=t||"")&&(t="?");for(var n in e)fe.call(e,n)&&r.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return r.length?t+r.join("&"):""},parse:function(e){for(var t,r=/([^=?&]+)=?([^&]*)/g,n={};t=r.exec(e);n[s(t[1])]=s(t[2]));return n}},pe=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,he=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,ye=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],ve={hash:1,query:1};h.prototype={set:function(e,t,r){var n=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||le.parse)(t)),n[e]=t;break;case"port":n[e]=t,se(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[e]=t,/:\d+$/.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!r;break;case"pathname":n.pathname=t.length&&"/"!==t.charAt(0)?"/"+t:t;break;default:n[e]=t}for(var o=0;o<ye.length;o++){var i=ye[o];i[4]&&(n[i[1]]=n[i[1]].toLowerCase())}return n.origin=n.protocol&&n.host&&"file:"!==n.protocol?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},toString:function(e){e&&"function"==typeof e||(e=le.stringify);var t,r=this,n=r.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var o=n+(r.slashes?"//":"");return r.username&&(o+=r.username,r.password&&(o+=":"+r.password),o+="@"),o+=r.host+r.pathname,(t="object"===b(r.query)?e(r.query):r.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(o+=r.hash),o}},h.extractProtocol=l,h.location=f,h.qs=le;var de=h,ge=function(e){function t(){return w(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,de),t}(),be=void 0,we=void 0;if("node"===q.type){var me=require("fs");be=me.readFile,we=require("request")}var ke=function(){function e(){w(this,e)}return m(e,null,[{key:"text",value:function(){var e=g.apply(void 0,arguments),t=A(e,2),r=t[0],n=t[1];return n.type="text",d(r,n)}},{key:"json",value:function(){var e=g.apply(void 0,arguments),t=A(e,2),r=t[0],n=t[1];return n.type="json",d(r,n)}},{key:"buffer",value:function(){var e=g.apply(void 0,arguments),t=A(e,2),r=t[0],n=t[1];return n.type="arraybuffer",n.encoding=null,d(r,n)}},{key:"csv",value:function(){var e=g.apply(void 0,arguments),t=A(e,2),r=t[0],n=t[1];return this.text(r,n).then(function(e){return q.self.d3.csvParse(e,n.row)})}},{key:"tsv",value:function(){var e=g.apply(void 0,arguments),t=A(e,2),r=t[0],n=t[1];return this.text(r,n).then(function(e){return q.self.d3.tsvParse(e,n.row)})}}]),e}(),je=t("Semaphore"),Ae=function e(t,r){var n=this;w(this,e);var o=[new Promise(function(e,t){n.resolve=e,n.reject=t}),new Promise(function(e){n.let=e}).then(function(){r(n.resolve,n.reject)})];this.promise=Promise.all(o).then(function(e){return t.signal(),e[0]},function(e){return t.signal(),Promise.reject(e)})},xe=function(){function e(t){w(this,e);var r=je(this);r.capacity=t,r.available=t,r.queue=[]}return m(e,[{key:"wait",value:function(e){var t=je(this),r=new Ae(this,e);return 0===t.available?t.queue.push(r):(--t.available,r.let()),r.promise}},{key:"signal",value:function(){var e=je(this);0===e.queue.length?++e.available:e.queue.shift().let()}},{key:"capacity",get:function(){return je(this).capacity}},{key:"available",get:function(){return je(this).available}}]),e}(),Oe=t("Singleton"),Se=function(){function e(){if(w(this,e),void 0!==Oe(this.constructor).instance)throw new Error("Attempt to create multiple instances for singleton")}return m(e,null,[{key:"get",value:function(){var e=Oe(this);if(void 0===e.instance){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];e.instance=new(Function.prototype.bind.apply(this,[null].concat(r)))}return e.instance}}]),e}(),Ee=function(){function e(){w(this,e)}return m(e,null,[{key:"transform",value:function(e,t,r){var n=[];return e.forEach(function(o,i){var u=i%t;if(n[u]=o,u===t-1)for(var a=r.apply(void 0,n.concat([Math.floor(i/t)])),c=0;c<t;++c)e[i-(t-c-1)]=a[c]}),e}},{key:"forEach",value:function(e,t,r){var n=[];e.forEach(function(e,o){var i=o%t;n[i]=e,i===t-1&&r.apply(void 0,n.concat([Math.floor(o/t)]))})}},{key:"some",value:function(e,t,r){var n=[];return e.some(function(e,o){var i=o%t;return n[i]=e,i===t-1&&r.apply(void 0,n.concat([Math.floor(o/t)]))})}},{key:"every",value:function(e,t,r){var n=[];return e.every(function(e,o){var i=o%t;return n[i]=e,i!==t-1||r.apply(void 0,n.concat([Math.floor(o/t)]))})}},{key:"reduce",value:function(e,t,r,n){var o=[];return e.reduce(function(e,n,i){var u=i%t;return o[u]=n,u===t-1?r.apply(void 0,[e].concat(o,[Math.floor(i/t)])):e},n)}}]),e}(),Te=n(function(e,t){!function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),n=0;n<e.length;n++)r[e.charCodeAt(n)]=n;t.encode=function(t){var r,n=new Uint8Array(t),o=n.length,i="";for(r=0;r<o;r+=3)i+=e[n[r]>>2],i+=e[(3&n[r])<<4|n[r+1]>>4],i+=e[(15&n[r+1])<<2|n[r+2]>>6],i+=e[63&n[r+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(e){var t,n,o,i,u,a=.75*e.length,c=e.length,s=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var f=new ArrayBuffer(a),l=new Uint8Array(f);for(t=0;t<c;t+=4)n=r[e.charCodeAt(t)],o=r[e.charCodeAt(t+1)],i=r[e.charCodeAt(t+2)],u=r[e.charCodeAt(t+3)],l[s++]=n<<2|o>>4,l[s++]=(15&o)<<4|i>>2,l[s++]=(3&i)<<6|63&u;return f}}()});if("node"===q.type){var qe=require("text-encoding");void 0===q.self.TextEncoder&&(q.self.TextEncoder=qe.TextEncoder),void 0===q.self.TextDecoder&&(q.self.TextDecoder=qe.TextDecoder)}var Pe,Ce=function(){function e(){w(this,e)}return m(e,null,[{key:"encode",value:function(e){if("function"!=typeof TextEncoder)throw new Error("TextEncoder is missing");var t=new TextEncoder,r=JSON.stringify(e);return t.encode(r).buffer}},{key:"decode",value:function(e){if("function"!=typeof TextDecoder)throw new Error("TextDecoder is missing");var t=new TextDecoder,r=new DataView(e),n=t.decode(r);return JSON.parse(n)}},{key:"pack",value:function(e){return Te.encode(e)}},{key:"unpack",value:function(e){return Te.decode(e)}},{key:"packBufferGeometry",value:function(e){var t=this;Object.values(e.data.attributes).forEach(function(e){var r=new(0,q.self[e.type])(e.array).buffer;e.array=t.pack(r)})}},{key:"unpackBufferGeometry",value:function(e){var t=this;Object.values(e.data.attributes).forEach(function(e){var r=q.self[e.type],n=t.unpack(e.array);e.array=Array.from(new r(n))})}}]),e}(),Be=M.crypto||M.msCrypto;if(Be&&Be.getRandomValues){var _e=new Uint8Array(16);Pe=function(){return Be.getRandomValues(_e),_e}}if(!Pe){var Re=new Array(16);Pe=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),Re[t]=e>>>((3&t)<<3)&255;return Re}}for(var Ne=Pe,Me=[],Fe=0;Fe<256;++Fe)Me[Fe]=(Fe+256).toString(16).substr(1);var Ue=function(e,t){var r=t||0,n=Me;return n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]},Ie=Ne(),Je=[1|Ie[0],Ie[1],Ie[2],Ie[3],Ie[4],Ie[5]],De=16383&(Ie[6]<<8|Ie[7]),Le=0,ze=0,He=function(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||Ne)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[n+i]=o[i];return t||Ue(o)},Ke=He;Ke.v1=function(e,t,r){var n=t&&r||0,o=t||[],i=void 0!==(e=e||{}).clockseq?e.clockseq:De,u=void 0!==e.msecs?e.msecs:(new Date).getTime(),a=void 0!==e.nsecs?e.nsecs:ze+1,c=u-Le+(a-ze)/1e4;if(c<0&&void 0===e.clockseq&&(i=i+1&16383),(c<0||u>Le)&&void 0===e.nsecs&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Le=u,ze=a,De=i;var s=(1e4*(268435455&(u+=122192928e5))+a)%4294967296;o[n++]=s>>>24&255,o[n++]=s>>>16&255,o[n++]=s>>>8&255,o[n++]=255&s;var f=u/4294967296*1e4&268435455;o[n++]=f>>>8&255,o[n++]=255&f,o[n++]=f>>>24&15|16,o[n++]=f>>>16&255,o[n++]=i>>>8|128,o[n++]=255&i;for(var l=e.node||Je,p=0;p<6;++p)o[n+p]=l[p];return t||Ue(o)},Ke.v4=He;var Ve=Ke;e.Aggregate=T,e.AggregateFunction=S,e.AssertionError=r,e.Environment=q,e.FilePath=C,e.Hash=function(e){return D(oe(e))},e.ImplementationError=c,e.Multiton=ce,e.Namespace=t,e.Request=ke,e.Semaphore=xe,e.Singleton=Se,e.Stride=Ee,e.Transferral=Ce,e.URL=ge,e.UUID=function(){return Ve.v4()},Object.defineProperty(e,"__esModule",{value:!0})});